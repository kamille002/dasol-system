<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‹¤ì†”ë¬¼í™˜ê²½ì—°êµ¬ì†Œ - ëŒ€ì‹œë³´ë“œ</title>
    
    <!-- PWA ë©”íƒ€íƒœê·¸ -->
    <meta name="description" content="ìˆ˜ì§ˆê²€ì‚¬ ì „ë¬¸ ì—°êµ¬ì†Œ í†µí•© ì—…ë¬´ê´€ë¦¬ ì‹œìŠ¤í…œ">
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ë‹¤ì†”ì‹œìŠ¤í…œ">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- ì•„ì´ì½˜ -->
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="/icons/icon-152x152.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            background: #f8f9fa;
            color: #1f2937;
        }

        /* í—¤ë” */
        .header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .header-left h1 {
            font-size: 24px;
            font-weight: 700;
        }

        .header-date {
            font-size: 14px;
            opacity: 0.9;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-name {
            font-weight: 600;
        }

        .logout-btn {
            padding: 8px 16px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        /* ì»¨í…Œì´ë„ˆ */
        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 15px 20px;
        }

        /* ê³µì§€ì‚¬í•­ ì„¹ì…˜ */
        .notice-section {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }

        .notice-box {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            height: 220px;
            display: flex;
            flex-direction: column;
        }

        .notice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f3f4f6;
        }

        .notice-header h2 {
            font-size: 20px;
            color: #1f2937;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .add-btn {
            padding: 8px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .add-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .notice-list {
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .notice-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px;
            background: #f9fafb;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .notice-item:hover {
            background: #f3f4f6;
            transform: translateX(4px);
        }

        .notice-item.new {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
        }

        .notice-item.important {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
        }

        .badge {
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 700;
            white-space: nowrap;
        }

        .badge.new {
            background: #10b981;
            color: white;
        }

        .badge.important {
            background: #ef4444;
            color: white;
        }

        .badge.keyword {
            background: #667eea;
            color: white;
        }

        .notice-title {
            flex: 1;
            font-size: 15px;
            color: #1f2937;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .notice-date {
            font-size: 13px;
            color: #6b7280;
        }

        /* ìŠ¤í¬ë¡¤ë°” */
        .notice-list::-webkit-scrollbar {
            width: 6px;
        }

        .notice-list::-webkit-scrollbar-track {
            background: #f3f4f6;
            border-radius: 10px;
        }

        .notice-list::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 10px;
        }

        .notice-list::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
        
        /* ë”ë³´ê¸° ë²„íŠ¼ */
        .show-more-btn {
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            padding: 8px 16px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            color: #667eea;
            font-weight: 600;
            font-size: 13px;
            margin-top: 10px;
            transition: all 0.2s;
        }
        
        .show-more-btn:hover {
            background: #eff6ff;
            border-color: #667eea;
        }
        
        .notice-item.hidden {
            display: none;
        }

        /* ì—…ë¬´ ì˜ì—­ ì„¹ì…˜ */
        .work-section {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 15px;
        }

        .work-column {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .work-box {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
        }

        .work-box h3 {
            font-size: 17px;
            color: #1f2937;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f3f4f6;
        }

        /* ê° íŒŒíŠ¸ë³„ ìƒ‰ìƒ */
        .work-box.admin {
            border-left: 4px solid #10b981;
        }

        .work-box.selfmon {
            border-left: 4px solid #3b82f6;
        }

        .work-box.drinking {
            border-left: 4px solid #9ca3af;
        }

        .work-box.sales {
            border-left: 4px solid #ec4899;
        }

        /* ì•Œë¦¼ë°” - ì‹¬í”Œ ë²„ì „ */
        .alert-section {
            background: white;
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .alert-title {
            font-size: 16px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f3f4f6;
        }

        .alert-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .alert-button {
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        /* í‰ìƒì‹œ (í†µì¼ëœ ìƒ‰ìƒ) */
        .alert-button:hover {
            background: #f3f4f6;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* ì•Œë¦¼ ìˆì„ ë•Œë§Œ ë¹¨ê°• */
        .alert-button.has-alert {
            background: #fef2f2;
            border-color: #ef4444;
        }

        .alert-button.has-alert:hover {
            background: #fee2e2;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
        }

        .alert-icon {
            font-size: 28px;
        }

        .alert-label {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            text-align: center;
        }

        .alert-count {
            font-size: 24px;
            font-weight: 700;
            color: #9ca3af;
        }

        /* ì•Œë¦¼ ìˆì„ ë•Œë§Œ ë¹¨ê°„ ìˆ«ì */
        .alert-button.has-alert .alert-count {
            color: #ef4444;
        }

        /* ëª¨ë‹¬ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-container {
            background: white;
            border-radius: 16px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            border-bottom: 2px solid #f3f4f6;
        }

        .modal-header h3 {
            font-size: 22px;
            color: #1f2937;
            font-weight: 700;
        }

        .close-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: #f3f4f6;
            border-radius: 8px;
            cursor: pointer;
            font-size: 20px;
            color: #6b7280;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: #ef4444;
            color: white;
        }

        .modal-body {
            padding: 25px;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3b82f6;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group.full {
            grid-column: 1 / -1;
        }

        .form-label {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
        }

        .form-label .required {
            color: #ef4444;
            margin-left: 2px;
        }

        .form-input,
        .form-select,
        .form-textarea {
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.2s;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #3b82f6;
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            background: #f9fafb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .checkbox-item:hover {
            background: #f3f4f6;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-item label {
            cursor: pointer;
            font-size: 14px;
        }

        .price-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .price-table th,
        .price-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .price-table th {
            background: #f9fafb;
            font-weight: 600;
            color: #374151;
        }

        .price-table .total-row {
            font-weight: 700;
            background: #f3f4f6;
        }

        .price-table .grand-total {
            font-size: 18px;
            color: #3b82f6;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            padding: 20px 25px;
            border-top: 2px solid #f3f4f6;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            width: 100%;
            text-align: center;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-primary:hover {
            background: #2563eb;
        }

        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
        }

        .btn-secondary:hover {
            background: #d1d5db;
        }
        
        .btn-success {
            background: #10b981;
            color: white;
        }
        
        .btn-success:hover {
            background: #059669;
        }

        .info-text {
            font-size: 13px;
            color: #6b7280;
            margin-top: 5px;
        }

        /* ì˜ë¢° ë¦¬ìŠ¤íŠ¸ ëª¨ë‹¬ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-card.pending { background: linear-gradient(135deg, #f59e0b, #f97316); }
        .stat-card.sampled { background: linear-gradient(135deg, #10b981, #059669); }
        .stat-card.analyzing { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .stat-card.completed { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }

        .stat-card .label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: 700;
        }

        .filter-section {
            background: #f9fafb;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .list-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        .list-table th {
            background: #f9fafb;
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            color: #374151;
            border-bottom: 2px solid #e5e7eb;
            font-size: 14px;
        }

        .list-table td {
            padding: 15px 12px;
            border-bottom: 1px solid #e5e7eb;
            font-size: 14px;
        }

        .list-table tbody tr {
            cursor: pointer;
            transition: all 0.2s;
        }

        .list-table tbody tr:hover {
            background: #f9fafb;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-badge.pending {
            background: #fef3c7;
            color: #92400e;
        }

        .status-badge.sampled {
            background: #d1fae5;
            color: #065f46;
        }

        .status-badge.analyzing {
            background: #dbeafe;
            color: #1e40af;
        }

        .status-badge.completed {
            background: #e9d5ff;
            color: #6b21a8;
        }

        .action-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            margin-right: 5px;
        }

        .action-btn.view {
            background: #3b82f6;
            color: white;
        }

        .action-btn.view:hover {
            background: #2563eb;
        }

        .action-btn.next {
            background: #10b981;
            color: white;
        }

        .action-btn.next:hover {
            background: #059669;
        }
        
        /* ì˜ì—…íŒ€ ì „ìš© ëª¨ë“œ */
        .sales-mode-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 10000;
            overflow-y: auto;
        }
        
        .sales-mode-overlay.active {
            display: block;
        }
        
        .sales-mode-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }
        
        .sales-mode-header {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .sales-mode-header h2 {
            margin: 0 0 10px 0;
            color: #1f2937;
            font-size: 24px;
        }
        
        .sales-mode-header .user-info {
            color: #6b7280;
            font-size: 14px;
        }
        
        .back-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .camera-section {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .camera-button {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 30px;
            font-size: 24px;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            box-shadow: 0 8px 16px rgba(16, 185, 129, 0.3);
            transition: all 0.3s;
        }
        
        .camera-button:active {
            transform: scale(0.95);
        }
        
        .checkin-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .checkin-button {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .checkin-button.checkin {
            border-color: #3b82f6;
            color: #3b82f6;
        }
        
        .checkin-button.checkout {
            border-color: #f59e0b;
            color: #f59e0b;
        }
        
        .checkin-button:active {
            transform: scale(0.95);
        }
        
        .schedule-section {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .schedule-section h3 {
            margin: 0 0 15px 0;
            color: #1f2937;
            font-size: 18px;
        }
        
        .schedule-item {
            background: #f9fafb;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
        }
        
        .schedule-item .time {
            color: #6b7280;
            font-size: 13px;
            margin-bottom: 5px;
        }
        
        .schedule-item .facility {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 5px;
        }
        
        .schedule-item .address {
            color: #6b7280;
            font-size: 13px;
        }
        
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .menu-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        
        .menu-item:active {
            transform: scale(0.95);
        }
        
        .menu-item .icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .menu-item .label {
            font-size: 14px;
            font-weight: 600;
            color: #1f2937;
        }
        
        /* ì‚¬ì§„ ì´¬ì˜ ëª¨ë‹¬ */
        .photo-modal {
            background: white;
            border-radius: 16px;
            padding: 20px;
            max-width: 500px;
        }
        
        .photo-categories {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }
        
        .photo-category-btn {
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .photo-category-btn.selected {
            border-color: #3b82f6;
            background: #eff6ff;
            color: #3b82f6;
            font-weight: 600;
        }
        
        .photo-preview {
            width: 100%;
            max-height: 300px;
            object-fit: contain;
            border-radius: 12px;
            margin: 15px 0;
        }
        
        /* ì „ìê²°ì¬ ë©”ë‰´ ì•„ì´í…œ */
        .approval-menu-item {
            background: #f9fafb;
            padding: 16px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        
        .approval-menu-item:hover {
            background: #eff6ff;
            border-color: #667eea;
            transform: translateX(4px);
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 1600px) {
            .work-section {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 1000px) {
            .work-section {
                grid-template-columns: 1fr;
            }
            
            .notice-section {
                grid-template-columns: 1fr;
            }
            
            .alert-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- í—¤ë” -->
    <div class="header">
        <div class="header-left">
            <h1>ğŸ¢ ë‹¤ì†”ë¬¼í™˜ê²½ì—°êµ¬ì†Œ</h1>
            <span class="header-date" id="currentDate"></span>
        </div>
        <div class="header-right">
            <button id="installAppButton" style="display: none; margin-right: 15px; padding: 8px 16px; background: white; color: #667eea; border: 2px solid white; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px; transition: all 0.3s ease;">
                ğŸ“± ì•± ì„¤ì¹˜
            </button>
            <span class="user-name">ë¡œë”©ì¤‘...</span>
            <button class="logout-btn" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
    </div>

    <!-- ì»¨í…Œì´ë„ˆ -->
    <div class="container">
        <!-- ê³µì§€ì‚¬í•­ ì„¹ì…˜ -->
        <section class="notice-section">
            <!-- íšŒì‚¬ ê³µì§€ì‚¬í•­ -->
            <div class="notice-box">
                <div class="notice-header">
                    <h2>ğŸ“¢ íšŒì‚¬ ê³µì§€ì‚¬í•­</h2>
                    <div style="display: flex; gap: 10px;">
                        <button class="add-btn" onclick="expandNotice()" style="background: #f3f4f6; color: #667eea;">ë”ë³´ê¸°</button>
                        <button class="add-btn" onclick="alert('ê³µì§€ì‚¬í•­ ì‘ì„±')">+ ì‘ì„±</button>
                    </div>
                </div>
                <div class="notice-list" id="companyNotices">
                    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>

            <!-- ì§ì› ê²Œì‹œíŒ (NEW!) -->
            <div class="notice-box">
                <div class="notice-header">
                    <h2>ğŸ’¬ ì§ì› ê²Œì‹œíŒ</h2>
                    <div style="display: flex; gap: 10px;">
                        <button class="add-btn" onclick="expandBoard()" style="background: #f3f4f6; color: #667eea;">ë”ë³´ê¸°</button>
                        <button class="add-btn" onclick="openBoardWriteModal()">+ ê¸€ì“°ê¸°</button>
                    </div>
                </div>
                <div class="notice-list" id="boardPosts">
                    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>

            <!-- ê´€ë³´ í¬ë¡¤ë§ -->
            <div class="notice-box">
                <div class="notice-header">
                    <h2>ğŸ“° ê´€ë³´ ì—…ë°ì´íŠ¸</h2>
                    <div style="display: flex; gap: 10px;">
                        <button class="add-btn" onclick="expandGovNotice()" style="background: #f3f4f6; color: #667eea;">ë”ë³´ê¸°</button>
                        <button class="add-btn" onclick="alert('ìƒˆë¡œê³ ì¹¨')">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
                    </div>
                </div>
                <div class="notice-list" id="govNotices">
                    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>
        </section>

        <!-- ì—…ë¬´ ì˜ì—­ ì„¹ì…˜ -->
        <section class="work-section">
            <!-- 1. ì´ë¬´í–‰ì • íŒŒíŠ¸ -->
            <div class="work-column">
                <div class="work-box admin">
                    <h3>ğŸ’¼ ì´ë¬´í–‰ì • íŒŒíŠ¸</h3>
                    
                    <!-- ì˜ë¢° ê´€ë¦¬ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="window.location.href='pages/request-register.html'">+ ì˜ë¢° ì ‘ìˆ˜</button>
                        <button class="btn btn-secondary" onclick="window.location.href='pages/request-list-admin.html'">ğŸ“‹ ì ‘ìˆ˜í˜„í™©</button>
                    </div>
                    
                    <!-- ì „ìê²°ì¬ & ì¸ì‚¬ê´€ë¦¬ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                        <button class="btn btn-primary" onclick="openApprovalModal()">ğŸ“‹ ì „ìê²°ì¬</button>
                        <button class="btn btn-secondary" onclick="toggleHRMenu()">ğŸ‘¥ ì¸ì‚¬ê´€ë¦¬</button>
                    </div>
                    
                    <!-- ì¸ì‚¬ê´€ë¦¬ í•˜ìœ„ ë©”ë‰´ -->
                    <div id="hrSubMenu" style="display: none; margin-top: 10px; padding: 12px; background: #f9fafb; border-radius: 8px;">
                        <button class="btn btn-secondary" onclick="window.location.href='pages/hr-certificates.html'" 
                                style="width: 100%; margin-bottom: 8px; font-size: 13px;">
                            ğŸ“œ ìê²©ì¦
                        </button>
                        <button class="btn btn-secondary" onclick="window.location.href='pages/hr-contracts.html'" 
                                style="width: 100%; margin-bottom: 8px; font-size: 13px;">
                            ğŸ“‹ ê·¼ë¡œê³„ì•½ì„œ
                        </button>
                        <button class="btn btn-secondary" onclick="window.location.href='pages/hr-cards.html'" 
                                style="width: 100%; margin-bottom: 8px; font-size: 13px;">
                            ğŸ‘¤ ì¸ì‚¬ì¹´ë“œ
                        </button>
                        <button class="btn btn-secondary" onclick="window.location.href='pages/hr-training.html'" 
                                style="width: 100%; font-size: 13px;">
                            ğŸ“š êµìœ¡ ê´€ë¦¬
                        </button>
                    </div>
                    
                    <!-- ì°¨ëŸ‰ê´€ë¦¬ & í†µê³„ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                        <button id="vehicleManagementBtn" class="btn btn-secondary" onclick="window.location.href='pages/vehicle-management.html'">ğŸš— ì°¨ëŸ‰ê´€ë¦¬</button>
                        <button class="btn btn-secondary" onclick="alert('í†µê³„ ê°œë°œ ì˜ˆì •')">ğŸ“Š í†µê³„</button>
                    </div>
                    
                    <!-- ë¬¸ì„œ ê´€ë¦¬ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                        <button class="btn btn-primary" onclick="window.location.href='pages/invoice-management.html'">ğŸ’° ì²­êµ¬ì„œ</button>
                        <button class="btn btn-secondary" onclick="window.location.href='pages/refund-request.html'">ğŸ’¸ í™˜ë¶ˆ</button>
                    </div>
                    
                    <!-- ì‹œë£Œ ê´€ë¦¬ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                        <button class="btn btn-success" onclick="window.location.href='pages/sample-label.html'">ğŸ·ï¸ ì‹œë£Œë¼ë²¨</button>
                        <button class="btn btn-secondary" onclick="window.location.href='pages/sample-ledger.html'">ğŸ“‹ ì ‘ìˆ˜ëŒ€ì¥</button>
                    </div>
                </div>
            </div>

            <!-- 2. ìˆ˜ì§ˆìê°€ì¸¡ì • -->
            <div class="work-column">
                <div class="work-box selfmon">
                    <h3>ğŸ“— ìˆ˜ì§ˆìê°€ì¸¡ì • íŒŒíŠ¸</h3>
                    
                    <!-- ì¥ë¹„ êµì • ì„ë°• ì•Œë¦¼ -->
                    <div id="equipmentCalibrationAlert" style="display: none; background: #fffbeb; border: 2px solid #fbbf24; padding: 16px; border-radius: 8px; margin: 16px 0;">
                        <div style="display: flex; align-items: start; gap: 12px;">
                            <div style="font-size: 24px;">âš ï¸</div>
                            <div style="flex: 1;">
                                <div style="font-weight: 700; color: #92400e; margin-bottom: 8px;">
                                    êµì • ì„ë°• ì¥ë¹„ [<span id="equipmentCalibrationCount">0</span>]
                                    <button onclick="window.location.href='pages/equipment-management.html'" style="float: right; background: #f59e0b; color: white; border: none; padding: 4px 12px; border-radius: 4px; font-size: 12px; cursor: pointer;">í™•ì¸</button>
                                </div>
                                <div id="equipmentCalibrationList" style="font-size: 13px; color: #78350f; line-height: 1.6;">
                                    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="openRequestModal()" style="margin-top: 20px; width: 100%;">
                        + ì‹ ê·œ ì˜ë¢° ë“±ë¡
                    </button>
                    <button class="btn btn-secondary" onclick="openRequestListModal()" style="margin-top: 10px; width: 100%;">
                        ğŸ“‹ ì˜ë¢°ì ‘ìˆ˜ LIST
                    </button>
                    <button class="btn btn-secondary" onclick="window.location.href='pages/equipment-management.html'" style="margin-top: 10px; width: 100%;">
                        ğŸ”¬ ì¥ë¹„ê´€ë¦¬
                    </button>
                </div>
            </div>

            <!-- 3. ë¨¹ëŠ”ë¬¼ ìˆ˜ì§ˆê²€ì‚¬ -->
            <div class="work-column">
                <div class="work-box drinking">
                    <h3>ğŸ“˜ ë¨¹ëŠ”ë¬¼ ìˆ˜ì§ˆê²€ì‚¬ íŒŒíŠ¸</h3>
                </div>
            </div>

            <!-- 4. ì˜ì—…íŒ€ -->
            <div class="work-column">
                <div class="work-box sales">
                    <h3>ğŸ’¼ ì˜ì—…íŒ€ íŒŒíŠ¸</h3>
                    
                    <!-- ë¯¸ë°°ì • ì•ŒëŒ (íŒ€ì¥ë§Œ) -->
                    <div id="unassignedAlert" style="display: none; background: #f5f3ff; border: 2px solid #8b5cf6; border-radius: 8px; padding: 12px; margin-top: 16px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <span style="font-size: 16px;">âš ï¸</span>
                                <span style="font-weight: 700; color: #6b21a8; margin-left: 8px;">ë¯¸ë°°ì • ì˜ë¢°</span>
                                <span id="unassignedCount" style="background: #8b5cf6; color: white; padding: 2px 10px; border-radius: 12px; font-size: 13px; font-weight: 700; margin-left: 8px;">0</span>
                            </div>
                            <button onclick="window.location.href='pages/request-list-admin.html'" style="background: #8b5cf6; color: white; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; cursor: pointer;">
                                í™•ì¸
                            </button>
                        </div>
                        <p style="font-size: 12px; color: #7c3aed; margin-top: 8px; margin-bottom: 0;">ë‹´ë‹¹ìê°€ ë°°ì •ë˜ì§€ ì•Šì€ ì˜ë¢°ê°€ ìˆìŠµë‹ˆë‹¤</p>
                    </div>
                    
                    <!-- ì˜ë¢° ê´€ë ¨ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="window.location.href='pages/request-register.html'">+ ì˜ë¢° ì ‘ìˆ˜</button>
                        <button class="btn btn-secondary" onclick="window.location.href='pages/request-calendar.html'">ğŸ“… ë‚´ ì ‘ìˆ˜í˜„í™©</button>
                    </div>
                    
                    <!-- ì˜ì—…íŒ€ ì „ìš© ëª¨ë“œ -->
                    <button class="btn btn-primary" onclick="switchToSalesMode()" style="margin-top: 15px; width: 100%; font-size: 16px; padding: 15px;">
                        ğŸ“± ì˜ì—…íŒ€ ì „ìš© ëª¨ë“œ
                    </button>
                    
                    <!-- ì—…ë¬´ì¼ì§€ & ì°¨ëŸ‰ì¼ì§€ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                        <button class="btn btn-secondary" onclick="window.location.href='pages/work-log-daily.html'">ğŸ“ ì—…ë¬´ì¼ì§€</button>
                        <button class="btn btn-secondary" onclick="showVehicleLogModal()">ğŸš— ì°¨ëŸ‰ì¼ì§€</button>
                    </div>
                    
                    <!-- ì±„ì·¨ê¸°ë¡ë¶€ & ì ‘ìˆ˜ëŒ€ì¥ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                        <button class="btn btn-secondary" onclick="showSamplingRecordModal()">ğŸ§ª ì±„ì·¨ê¸°ë¡ë¶€</button>
                        <button class="btn btn-secondary" onclick="showReceptionLogModal()">ğŸ“Š ì ‘ìˆ˜ëŒ€ì¥</button>
                    </div>
                    
                    <!-- ì˜ì—… ê´€ë¦¬ CRM - ë§¨ í•˜ë‹¨ -->
                    <button class="btn btn-primary" onclick="window.location.href='pages/sales-crm.html'" style="margin-top: 20px; width: 100%; background: linear-gradient(135deg, #10b981 0%, #059669 100%); font-size: 16px; padding: 15px;">
                        ğŸ’¼ ì˜ì—… ê´€ë¦¬ (CRM)
                    </button>
                    
                    <!-- ë¬¸ì„œ ê´€ë¦¬ -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                        <button class="btn btn-primary" onclick="window.location.href='pages/quote-management.html'">ğŸ“„ ê²¬ì ì„œ</button>
                        <button class="btn btn-secondary" onclick="window.location.href='pages/transaction-statement.html'">ğŸ“ ê±°ë˜ëª…ì„¸ì„œ</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ì•Œë¦¼ë°” - ì‹¬í”Œ ë²„ì „ -->
        <section class="alert-section">
            <div class="alert-title">ğŸ”” ì•Œë¦¼ ì„¼í„°</div>
            <div class="alert-grid">
                <!-- ê²°ì¬ ëŒ€ê¸° - ì•Œë¦¼ ìˆìŒ -->
                <div class="alert-button has-alert" onclick="alert('ê²°ì¬ ëŒ€ê¸° ëª©ë¡ìœ¼ë¡œ ì´ë™')">
                    <div class="alert-icon">âš ï¸</div>
                    <div class="alert-label">ê²°ì¬ ëŒ€ê¸°</div>
                    <div class="alert-count">2ê±´</div>
                </div>

                <!-- ì—…ë¬´ ì§€ì‹œ - ì•Œë¦¼ ìˆìŒ -->
                <div class="alert-button has-alert" onclick="alert('ì—…ë¬´ ì§€ì‹œ ëª©ë¡ìœ¼ë¡œ ì´ë™')">
                    <div class="alert-icon">ğŸ“Œ</div>
                    <div class="alert-label">ì—…ë¬´ ì§€ì‹œ</div>
                    <div class="alert-count">1ê±´</div>
                </div>

                <!-- ê¸´ê¸‰ ì‹œë£Œ - ì•Œë¦¼ ìˆìŒ -->
                <div class="alert-button has-alert" onclick="alert('ê¸´ê¸‰ ì‹œë£Œ ëª©ë¡ìœ¼ë¡œ ì´ë™')">
                    <div class="alert-icon">ğŸ”´</div>
                    <div class="alert-label">ê¸´ê¸‰ ì‹œë£Œ</div>
                    <div class="alert-count">1ê±´</div>
                </div>

                <!-- ë¯¸ìˆ˜ê¸ˆ ë…ì´‰ - ì•Œë¦¼ ìˆìŒ -->
                <div class="alert-button has-alert" onclick="alert('ë¯¸ìˆ˜ê¸ˆ ëª©ë¡ìœ¼ë¡œ ì´ë™')">
                    <div class="alert-icon">ğŸ’°</div>
                    <div class="alert-label">ë¯¸ìˆ˜ê¸ˆ ë…ì´‰</div>
                    <div class="alert-count">3ê±´</div>
                </div>
            </div>
        </section>
    </div>

    <!-- ì˜ë¢°ì„œ ë“±ë¡ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="requestModal">
        <div class="modal-container">
            <div class="modal-header">
                <h3>ğŸ“ ìê°€ì¸¡ì • ì˜ë¢°ì„œ ë“±ë¡</h3>
                <button class="close-btn" onclick="closeRequestModal()">âœ•</button>
            </div>
            
            <div class="modal-body">
                <!-- 1. ë¶„ì„ì˜ë¢°ë‚´ìš© -->
                <div class="form-section">
                    <div class="section-title">
                        ğŸ”¬ ë¶„ì„ì˜ë¢°ë‚´ìš©
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">ì‹œë£Œë²ˆí˜¸</label>
                            <input type="text" class="form-input" id="sampleNumber" readonly placeholder="ìë™ ìƒì„±">
                            <div class="info-text">ì ‘ìˆ˜ ì‹œ ìë™ ìƒì„±ë©ë‹ˆë‹¤</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ì ‘ìˆ˜ì¼ì</label>
                            <input type="date" class="form-input" id="receiptDate" readonly>
                        </div>
                        
                        <div class="form-group full">
                            <label class="form-label">ì‚¬ì—…ì¥ëª… <span class="required">*</span></label>
                            <select class="form-select" id="facilityName" onchange="loadFacilityInfo()">
                                <option value="">ì‚¬ì—…ì¥ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="ABCì œì¡°">ABC ì œì¡°</option>
                                <option value="XYZì‚°ì—…">XYZ ì‚°ì—…</option>
                                <option value="LMNì‹í’ˆ">LMN ì‹í’ˆ</option>
                                <option value="new">+ ì‹ ê·œ ì‚¬ì—…ì¥ ë“±ë¡</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ì‹œë£Œì¢…ë¥˜ <span class="required">*</span></label>
                            <select class="form-select" id="sampleType">
                                <option>ë°°ì¶œìˆ˜</option>
                                <option>ë°©ë¥˜ìˆ˜</option>
                                <option>ì›ìˆ˜</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ì¸¡ì •ìš©ë„</label>
                            <input type="text" class="form-input" value="ìê°€ì¸¡ì •ëŒ€í–‰" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ì±„ìˆ˜ ì˜ˆì •ì¼ <span class="required">*</span></label>
                            <input type="date" class="form-input" id="samplingDate">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ì±„ìˆ˜ ì‹œê°„</label>
                            <input type="time" class="form-input" id="samplingTime" value="10:00">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ì±„ìˆ˜ ì¥ì†Œ</label>
                            <input type="text" class="form-input" id="samplingLocation" placeholder="ì˜ˆ: 1ë²ˆ ë°°ìˆ˜êµ¬">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ì‹œë£Œì±„ì·¨ë°©ë²•</label>
                            <input type="text" class="form-input" value="ê³µì •ì‹œí—˜ë²•ì„ ì¤€ìˆ˜í•¨" readonly>
                        </div>
                        
                        <div class="form-group" style="grid-column: 1;">
                            <label class="form-label">PEë³‘ ìˆ˜ëŸ‰</label>
                            <input type="number" class="form-input" id="peBottle" value="2" min="0">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ìœ ë¦¬ë³‘ ìˆ˜ëŸ‰</label>
                            <input type="number" class="form-input" id="glassBottle" value="1" min="0">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ì‹œë£Œì±„ì·¨ì´ëŸ‰ (L)</label>
                            <input type="number" class="form-input" id="totalVolume" step="0.1" placeholder="ì˜ˆ: 2.5">
                        </div>
                        
                        <div class="form-group full">
                            <label class="form-label">ë¶„ì„í•­ëª© ì„ íƒ <span class="required">*</span></label>
                            <div class="checkbox-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="ph" value="pH" data-price="15000" onchange="calculateTotal()">
                                    <label for="ph">pH</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="cod" value="COD" data-price="25000" onchange="calculateTotal()">
                                    <label for="cod">COD</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="bod" value="BOD" data-price="30000" onchange="calculateTotal()">
                                    <label for="bod">BOD</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="ss" value="SS" data-price="20000" onchange="calculateTotal()">
                                    <label for="ss">SS</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="tn" value="T-N" data-price="35000" onchange="calculateTotal()">
                                    <label for="tn">T-N</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="tp" value="T-P" data-price="35000" onchange="calculateTotal()">
                                    <label for="tp">T-P</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="temp" value="ìˆ˜ì˜¨" data-price="10000" onchange="calculateTotal()">
                                    <label for="temp">ìˆ˜ì˜¨</label>
                                </div>
                                <div class="checkbox-item">
                                    <input type="checkbox" id="color" value="ìƒ‰ë„" data-price="15000" onchange="calculateTotal()">
                                    <label for="color">ìƒ‰ë„</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group full">
                            <label class="form-label">íŠ¹ì´ì‚¬í•­</label>
                            <textarea class="form-textarea" id="specialNotes" placeholder="íŠ¹ì´ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                        </div>
                    </div>
                </div>
                
                <!-- 2. ì˜ë¢°ì ì •ë³´ -->
                <div class="form-section">
                    <div class="section-title">
                        ğŸ‘¤ ì˜ë¢°ì ì •ë³´
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">ì‚¬ì—…ìë²ˆí˜¸</label>
                            <input type="text" class="form-input" id="businessNumber" placeholder="000-00-00000" readonly>
                            <div class="info-text">ì‚¬ì—…ì¥ ì„ íƒ ì‹œ ìë™ ì…ë ¥</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ë‹´ë‹¹ìëª… <span class="required">*</span></label>
                            <input type="text" class="form-input" id="contactName" placeholder="í™ê¸¸ë™">
                        </div>
                        
                        <div class="form-group full">
                            <label class="form-label">ì£¼ì†Œ</label>
                            <input type="text" class="form-input" id="address" placeholder="ì£¼ì†Œ" readonly>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ì—°ë½ì²˜ <span class="required">*</span></label>
                            <input type="tel" class="form-input" id="phone" placeholder="010-0000-0000">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ì´ë©”ì¼</label>
                            <input type="email" class="form-input" id="email" placeholder="email@example.com">
                        </div>
                    </div>
                </div>
                
                <!-- 3. ë¶„ì„ìˆ˜ìˆ˜ë£Œ -->
                <div class="form-section">
                    <div class="section-title">
                        ğŸ’° ë¶„ì„ìˆ˜ìˆ˜ë£Œ
                    </div>
                    <table class="price-table">
                        <thead>
                            <tr>
                                <th>í•­ëª©</th>
                                <th style="text-align: right;">ë‹¨ê°€</th>
                            </tr>
                        </thead>
                        <tbody id="priceTableBody">
                            <tr>
                                <td colspan="2" style="text-align: center; color: #9ca3af;">
                                    ë¶„ì„í•­ëª©ì„ ì„ íƒí•˜ë©´ ìë™ ê³„ì‚°ë©ë‹ˆë‹¤
                                </td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr class="total-row">
                                <td>ì†Œê³„</td>
                                <td style="text-align: right;" id="subtotal">0ì›</td>
                            </tr>
                            <tr class="total-row">
                                <td>ë¶€ê°€ì„¸ (10%)</td>
                                <td style="text-align: right;" id="vat">0ì›</td>
                            </tr>
                            <tr class="total-row">
                                <td class="grand-total">ì´ê³„</td>
                                <td style="text-align: right;" class="grand-total" id="total">0ì›</td>
                            </tr>
                        </tfoot>
                    </table>
                    
                    <div class="form-grid" style="margin-top: 15px;">
                        <div class="form-group">
                            <label class="form-label">ê²°ì œë°©ë²•</label>
                            <select class="form-select" id="paymentMethod">
                                <option>ì„¸ê¸ˆê³„ì‚°ì„œ</option>
                                <option>í˜„ê¸ˆì˜ìˆ˜ì¦</option>
                                <option>í˜„ê¸ˆ</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- 4. ì„±ì ì„œ ë°œê¸‰ ì •ë³´ -->
                <div class="form-section">
                    <div class="section-title">
                        ğŸ“„ ì„±ì ì„œ ë°œê¸‰ ì •ë³´
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">ì„±ì ì„œ ë°œê¸‰ ì˜ˆì •ì¼</label>
                            <input type="date" class="form-input" id="certificateDate">
                            <div class="info-text">ì±„ìˆ˜ì¼ + 7ì¼ (ì˜ì—…ì¼ ê¸°ì¤€)</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ì„±ì ì„œ ë°œì†¡ë°©ë²• <span class="required">*</span></label>
                            <select class="form-select" id="deliveryMethod">
                                <option value="email">ì´ë©”ì¼</option>
                                <option value="mail">ìš°í¸</option>
                                <option value="direct">ì§ì ‘ìˆ˜ë ¹</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeRequestModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="saveRequest()">ë“±ë¡</button>
            </div>
        </div>
    </div>

    <!-- ì˜ë¢°ì ‘ìˆ˜ LIST ëª¨ë‹¬ -->
    <div class="modal-overlay" id="requestListModal">
        <div class="modal-container" style="max-width: 1200px;">
            <div class="modal-header">
                <h3>ğŸ“‹ ì˜ë¢°ì ‘ìˆ˜ LIST</h3>
                <button class="close-btn" onclick="closeRequestListModal()">âœ•</button>
            </div>
            
            <div class="modal-body">
                <!-- ìƒíƒœë³„ í†µê³„ -->
                <div class="stats-grid">
                    <div class="stat-card pending">
                        <div class="label">ì ‘ìˆ˜ëŒ€ê¸°</div>
                        <div class="value">5ê±´</div>
                    </div>
                    <div class="stat-card sampled">
                        <div class="label">ì±„ìˆ˜ì™„ë£Œ</div>
                        <div class="value">3ê±´</div>
                    </div>
                    <div class="stat-card analyzing">
                        <div class="label">ë¶„ì„ì¤‘</div>
                        <div class="value">8ê±´</div>
                    </div>
                    <div class="stat-card completed">
                        <div class="label">ì™„ë£Œ</div>
                        <div class="value">142ê±´</div>
                    </div>
                </div>

                <!-- ê²€ìƒ‰/í•„í„° -->
                <div class="filter-section">
                    <div class="filter-grid">
                        <div class="form-group">
                            <label class="form-label">ê¸°ê°„</label>
                            <select class="form-select" onchange="filterList()">
                                <option value="all">ì „ì²´</option>
                                <option value="today">ì˜¤ëŠ˜</option>
                                <option value="week" selected>ì´ë²ˆ ì£¼</option>
                                <option value="month">ì´ë²ˆ ë‹¬</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ì‚¬ì—…ì¥</label>
                            <select class="form-select" onchange="filterList()">
                                <option value="">ì „ì²´</option>
                                <option value="ABCì œì¡°">ABC ì œì¡°</option>
                                <option value="XYZì‚°ì—…">XYZ ì‚°ì—…</option>
                                <option value="LMNì‹í’ˆ">LMN ì‹í’ˆ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ìƒíƒœ</label>
                            <select class="form-select" onchange="filterList()">
                                <option value="">ì „ì²´</option>
                                <option value="pending">ì ‘ìˆ˜ëŒ€ê¸°</option>
                                <option value="sampled">ì±„ìˆ˜ì™„ë£Œ</option>
                                <option value="analyzing">ë¶„ì„ì¤‘</option>
                                <option value="completed">ì™„ë£Œ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ê²€ìƒ‰</label>
                            <input type="text" class="form-input" placeholder="ì˜ë¢°ë²ˆí˜¸, ì‚¬ì—…ì¥ëª…" onkeyup="filterList()">
                        </div>
                    </div>
                </div>

                <!-- ì˜ë¢° ëª©ë¡ í…Œì´ë¸” -->
                <table class="list-table">
                    <thead>
                        <tr>
                            <th style="width: 120px;">ì˜ë¢°ë²ˆí˜¸</th>
                            <th style="width: 180px;">ì‚¬ì—…ì¥ëª…</th>
                            <th style="width: 120px;">ì±„ìˆ˜ì¼</th>
                            <th>ë¶„ì„í•­ëª©</th>
                            <th style="width: 100px;">ê¸ˆì•¡</th>
                            <th style="width: 100px;">ìƒíƒœ</th>
                            <th style="width: 150px;">ì•¡ì…˜</th>
                        </tr>
                    </thead>
                    <tbody id="requestListBody">
                        <tr onclick="viewRequestDetail('26-02-0005')">
                            <td><strong>26-02-0005</strong></td>
                            <td>ABC ì œì¡°</td>
                            <td>2026-02-15</td>
                            <td>pH, COD, BOD, SS</td>
                            <td>99,000ì›</td>
                            <td><span class="status-badge pending">ì ‘ìˆ˜ëŒ€ê¸°</span></td>
                            <td>
                                <button class="action-btn view" onclick="event.stopPropagation(); viewRequestDetail('26-02-0005')">ìƒì„¸</button>
                                <button class="action-btn next" onclick="event.stopPropagation(); nextStep('26-02-0005')">ì±„ìˆ˜</button>
                            </td>
                        </tr>
                        <tr onclick="viewRequestDetail('26-02-0004')">
                            <td><strong>26-02-0004</strong></td>
                            <td>XYZ ì‚°ì—…</td>
                            <td>2026-02-14</td>
                            <td>pH, T-N, T-P</td>
                            <td>93,500ì›</td>
                            <td><span class="status-badge sampled">ì±„ìˆ˜ì™„ë£Œ</span></td>
                            <td>
                                <button class="action-btn view" onclick="event.stopPropagation(); viewRequestDetail('26-02-0004')">ìƒì„¸</button>
                                <button class="action-btn next" onclick="event.stopPropagation(); nextStep('26-02-0004')">ë¶„ì„</button>
                            </td>
                        </tr>
                        <tr onclick="viewRequestDetail('26-02-0003')">
                            <td><strong>26-02-0003</strong></td>
                            <td>LMN ì‹í’ˆ</td>
                            <td>2026-02-13</td>
                            <td>pH, COD, BOD, SS, T-N, T-P</td>
                            <td>187,000ì›</td>
                            <td><span class="status-badge analyzing">ë¶„ì„ì¤‘</span></td>
                            <td>
                                <button class="action-btn view" onclick="event.stopPropagation(); viewRequestDetail('26-02-0003')">ìƒì„¸</button>
                                <button class="action-btn next" onclick="event.stopPropagation(); nextStep('26-02-0003')">ì„±ì ì„œ</button>
                            </td>
                        </tr>
                        <tr onclick="viewRequestDetail('26-02-0002')">
                            <td><strong>26-02-0002</strong></td>
                            <td>ABC ì œì¡°</td>
                            <td>2026-02-12</td>
                            <td>pH, COD, SS</td>
                            <td>66,000ì›</td>
                            <td><span class="status-badge completed">ì™„ë£Œ</span></td>
                            <td>
                                <button class="action-btn view" onclick="event.stopPropagation(); viewRequestDetail('26-02-0002')">ìƒì„¸</button>
                            </td>
                        </tr>
                        <tr onclick="viewRequestDetail('26-02-0001')">
                            <td><strong>26-02-0001</strong></td>
                            <td>XYZ ì‚°ì—…</td>
                            <td>2026-02-11</td>
                            <td>pH, T-N, T-P, ìˆ˜ì˜¨</td>
                            <td>105,600ì›</td>
                            <td><span class="status-badge completed">ì™„ë£Œ</span></td>
                            <td>
                                <button class="action-btn view" onclick="event.stopPropagation(); viewRequestDetail('26-02-0001')">ìƒì„¸</button>
                            </td>
                        </tr>
                        <tr onclick="viewRequestDetail('26-01-0198')">
                            <td><strong>26-01-0198</strong></td>
                            <td>LMN ì‹í’ˆ</td>
                            <td>2026-01-30</td>
                            <td>pH, COD, BOD</td>
                            <td>77,000ì›</td>
                            <td><span class="status-badge completed">ì™„ë£Œ</span></td>
                            <td>
                                <button class="action-btn view" onclick="event.stopPropagation(); viewRequestDetail('26-01-0198')">ìƒì„¸</button>
                            </td>
                        </tr>
                        <tr onclick="viewRequestDetail('26-01-0197')">
                            <td><strong>26-01-0197</strong></td>
                            <td>ABC ì œì¡°</td>
                            <td>2026-01-29</td>
                            <td>pH, SS, ìƒ‰ë„</td>
                            <td>55,000ì›</td>
                            <td><span class="status-badge completed">ì™„ë£Œ</span></td>
                            <td>
                                <button class="action-btn view" onclick="event.stopPropagation(); viewRequestDetail('26-01-0197')">ìƒì„¸</button>
                            </td>
                        </tr>
                        <tr onclick="viewRequestDetail('26-01-0196')">
                            <td><strong>26-01-0196</strong></td>
                            <td>XYZ ì‚°ì—…</td>
                            <td>2026-01-28</td>
                            <td>pH, COD, BOD, SS, T-N, T-P</td>
                            <td>187,000ì›</td>
                            <td><span class="status-badge completed">ì™„ë£Œ</span></td>
                            <td>
                                <button class="action-btn view" onclick="event.stopPropagation(); viewRequestDetail('26-01-0196')">ìƒì„¸</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeRequestListModal()">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ì—…ë¬´ì¼ì§€ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="workLogModal">
        <div class="modal-container" style="max-width: 900px;">
            <div class="modal-header">
                <h3>ğŸ“ ì—…ë¬´ì¼ì§€</h3>
                <button class="close-btn" onclick="closeWorkLogModal()">âœ•</button>
            </div>
            
            <div class="modal-body">
                <div id="workLogContent">
                    <!-- ì—…ë¬´ì¼ì§€ ëª©ë¡ì´ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeWorkLogModal()">ë‹«ê¸°</button>
                <button class="btn btn-secondary" onclick="editWorkLog()">âœï¸ ìˆ˜ì •</button>
                <button class="btn btn-primary" onclick="registerWorkLog()">â• ì‹ ê·œ ë“±ë¡</button>
                <button class="btn btn-primary" onclick="printWorkLog()">ğŸ–¨ï¸ ì¸ì‡„</button>
            </div>
        </div>
    </div>

    <!-- ì°¨ëŸ‰ìš´í–‰ì¼ì§€ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="vehicleLogModal">
        <div class="modal-container" style="max-width: 900px;">
            <div class="modal-header">
                <h3>ğŸš— ì°¨ëŸ‰ìš´í–‰ì¼ì§€</h3>
                <button class="close-btn" onclick="closeVehicleLogModal()">âœ•</button>
            </div>
            
            <div class="modal-body">
                <div id="vehicleLogContent">
                    <!-- ì°¨ëŸ‰ìš´í–‰ì¼ì§€ ëª©ë¡ì´ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeVehicleLogModal()">ë‹«ê¸°</button>
                <button class="btn btn-secondary" onclick="editVehicleLog()">âœï¸ ìˆ˜ì •</button>
                <button class="btn btn-primary" onclick="registerVehicleLog()">â• ì‹ ê·œ ë“±ë¡</button>
                <button class="btn btn-primary" onclick="printVehicleLog()">ğŸ–¨ï¸ ì¸ì‡„</button>
            </div>
        </div>
    </div>

    <!-- ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="samplingRecordModal">
        <div class="modal-container" style="max-width: 1000px;">
            <div class="modal-header">
                <h3>ğŸ§ª ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€</h3>
                <button class="close-btn" onclick="closeSamplingRecordModal()">âœ•</button>
            </div>
            
            <div class="modal-body">
                <div id="samplingRecordContent">
                    <!-- ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€ ëª©ë¡ì´ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeSamplingRecordModal()">ë‹«ê¸°</button>
                <button class="btn btn-secondary" onclick="editSamplingRecord()">âœï¸ ìˆ˜ì •</button>
                <button class="btn btn-primary" onclick="registerSamplingRecord()">â• ì‹ ê·œ ë“±ë¡</button>
                <button class="btn btn-primary" onclick="printSamplingRecord()">ğŸ–¨ï¸ ì¸ì‡„</button>
            </div>
        </div>
    </div>

    <!-- ì ‘ìˆ˜ëŒ€ì¥ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="receptionLogModal">
        <div class="modal-container" style="max-width: 1200px;">
            <div class="modal-header">
                <h3>ğŸ“Š ì ‘ìˆ˜ëŒ€ì¥</h3>
                <button class="close-btn" onclick="closeReceptionLogModal()">âœ•</button>
            </div>
            
            <div class="modal-body">
                <div id="receptionLogContent">
                    <!-- ì ‘ìˆ˜ëŒ€ì¥ ëª©ë¡ì´ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeReceptionLogModal()">ë‹«ê¸°</button>
                <button class="btn btn-primary" onclick="printReceptionLog()">ğŸ–¨ï¸ ì¸ì‡„</button>
            </div>
        </div>
    </div>

    <!-- ì˜ì—…íŒ€ ì „ìš© ëª¨ë“œ -->
    <div class="sales-mode-overlay" id="salesModeOverlay">
        <button class="back-button" onclick="exitSalesMode()">âœ•</button>
        <div class="sales-mode-container">
            <!-- í—¤ë” -->
            <div class="sales-mode-header">
                <h2>ğŸ’¼ ì˜ì—…íŒ€ í˜„ì¥ ì—…ë¬´</h2>
                <div class="user-info">
                    <span id="salesUserName">ë°•ì„ í˜¸</span> | 
                    <span id="salesUserTeam">ì˜ì—…1íŒ€</span> | 
                    <span id="salesDateTime"></span>
                </div>
            </div>
            
            <!-- ì¹´ë©”ë¼ ì„¹ì…˜ -->
            <div class="camera-section">
                <div class="icon" style="font-size: 48px; margin-bottom: 10px;">ğŸ“¸</div>
                <button class="camera-button" onclick="openCameraModal()">
                    í˜„ì¥ì‚¬ì§„ ì´¬ì˜
                </button>
                <p style="color: #6b7280; font-size: 13px; margin-top: 15px;">
                    íƒ­í•˜ì—¬ í˜„ì¥ ì‚¬ì§„ì„ ì´¬ì˜í•˜ì„¸ìš”
                </p>
            </div>
            
            <!-- ì²´í¬ì¸/ì²´í¬ì•„ì›ƒ -->
            <div class="checkin-section">
                <button class="checkin-button checkin" onclick="checkIn()">
                    âœ… ì²´í¬ì¸<br>
                    <small style="font-size: 13px; font-weight: normal;">í˜„ì¥ ë„ì°©</small>
                </button>
                <button class="checkin-button checkout" onclick="checkOut()">
                    â° ì²´í¬ì•„ì›ƒ<br>
                    <small style="font-size: 13px; font-weight: normal;">í˜„ì¥ ì¶œë°œ</small>
                </button>
            </div>
            
            <!-- ì˜¤ëŠ˜ì˜ ì¼ì • -->
            <div class="schedule-section">
                <h3>ğŸ“‹ ì˜¤ëŠ˜ì˜ ì¼ì • (<span id="scheduleCount">0</span>ê±´)</h3>
                <div id="scheduleList">
                    <p style="text-align: center; color: #9ca3af; padding: 20px;">
                        ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤
                    </p>
                </div>
            </div>
            
            <!-- ë©”ë‰´ ê·¸ë¦¬ë“œ -->
            <div class="menu-grid">
                <div class="menu-item" onclick="openRequestModal(); exitSalesMode();">
                    <div class="icon">â•</div>
                    <div class="label">ì‹ ê·œ ì˜ë¢°</div>
                </div>
                <div class="menu-item" onclick="showWorkLogModal(); exitSalesMode();">
                    <div class="icon">ğŸ“</div>
                    <div class="label">ì—…ë¬´ì¼ì§€</div>
                </div>
                <div class="menu-item" onclick="showVehicleLogModal(); exitSalesMode();">
                    <div class="icon">ğŸš—</div>
                    <div class="label">ì°¨ëŸ‰ì¼ì§€</div>
                </div>
                <div class="menu-item" onclick="showSamplingRecordModal(); exitSalesMode();">
                    <div class="icon">ğŸ§ª</div>
                    <div class="label">ì±„ì·¨ê¸°ë¡ë¶€</div>
                </div>
                <div class="menu-item" onclick="showReceptionLogModal(); exitSalesMode();">
                    <div class="icon">ğŸ“Š</div>
                    <div class="label">ì ‘ìˆ˜ëŒ€ì¥</div>
                </div>
                <div class="menu-item" onclick="showPhotoGallery();">
                    <div class="icon">ğŸ–¼ï¸</div>
                    <div class="label">ì‚¬ì§„ ê°¤ëŸ¬ë¦¬</div>
                </div>
                <div class="menu-item" id="adminMenu" style="display: none;" onclick="window.location.href='pages/admin-users.html'">
                    <div class="icon">ğŸ‘¥</div>
                    <div class="label">ì‚¬ìš©ì ê´€ë¦¬</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì‚¬ì§„ ì´¬ì˜ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="cameraModal">
        <div class="modal-container photo-modal">
            <div class="modal-header">
                <h3>ğŸ“¸ í˜„ì¥ì‚¬ì§„ ì´¬ì˜</h3>
                <button class="close-btn" onclick="closeCameraModal()">âœ•</button>
            </div>
            
            <div class="modal-body">
                <div style="margin-bottom: 15px;">
                    <label class="form-label">ì‚¬ì§„ ë¶„ë¥˜ ì„ íƒ <span class="required">*</span></label>
                    <div class="photo-categories">
                        <button class="photo-category-btn" onclick="selectPhotoCategory(this, 'scene')" data-category="scene">
                            ğŸï¸ í˜„ì¥ ì „ê²½
                        </button>
                        <button class="photo-category-btn" onclick="selectPhotoCategory(this, 'drain')" data-category="drain">
                            ğŸš° ë°°ìˆ˜êµ¬ ìœ„ì¹˜
                        </button>
                        <button class="photo-category-btn" onclick="selectPhotoCategory(this, 'sampling')" data-category="sampling">
                            ğŸ§ª ì‹œë£Œ ì±„ì·¨
                        </button>
                        <button class="photo-category-btn" onclick="selectPhotoCategory(this, 'sample')" data-category="sample">
                            ğŸ”¬ ì‹œë£Œ ì‚¬ì§„
                        </button>
                        <button class="photo-category-btn" onclick="selectPhotoCategory(this, 'equipment')" data-category="equipment">
                            âš™ï¸ ì¸¡ì • ì¥ë¹„
                        </button>
                        <button class="photo-category-btn" onclick="selectPhotoCategory(this, 'other')" data-category="other">
                            ğŸ“· ê¸°íƒ€
                        </button>
                    </div>
                </div>
                
                <input type="file" id="cameraInput" accept="image/*" capture="environment" style="display: none;" onchange="handlePhotoCapture(event)">
                
                <div id="photoPreviewContainer" style="display: none;">
                    <img id="photoPreview" class="photo-preview" alt="ì´¬ì˜ëœ ì‚¬ì§„">
                    <input type="text" class="form-input" id="photoMemo" placeholder="ì‚¬ì§„ ë©”ëª¨ (ì„ íƒì‚¬í•­)">
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCameraModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" id="captureBtn" onclick="triggerCamera()">ğŸ“¸ ì´¬ì˜í•˜ê¸°</button>
                <button class="btn btn-primary" id="savePhotoBtn" onclick="savePhoto()" style="display: none;">ğŸ’¾ ì €ì¥í•˜ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ì „ìê²°ì¬ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="approvalModal">
        <div class="modal-container" style="max-width: 600px;">
            <div class="modal-header">
                <h3>ğŸ“‹ ì „ìê²°ì¬ ì‹œìŠ¤í…œ</h3>
                <button class="close-btn" onclick="closeApprovalModal()">âœ•</button>
            </div>
            
            <div class="modal-body">
                <div style="display: flex; flex-direction: column; gap: 12px;">
                    <!-- í’ˆì˜ì„œ -->
                    <div class="approval-menu-item" onclick="openApprovalForm('proposal')">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 24px;">ğŸŒŸ</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 16px; color: #1f2937;">í’ˆì˜ì„œ (ì¼ë°˜ ê²°ì¬)</div>
                                <div style="font-size: 13px; color: #6b7280;">ëª¨ë“  ì¼ë°˜ ì—…ë¬´ ê²°ì¬</div>
                            </div>
                            <span style="color: #9ca3af;">â†’</span>
                        </div>
                    </div>
                    
                    <!-- ì§€ì¶œê²°ì˜ì„œ -->
                    <div class="approval-menu-item" onclick="openApprovalForm('expense')">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 24px;">ğŸ’°</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 16px; color: #1f2937;">ì§€ì¶œê²°ì˜ì„œ</div>
                                <div style="font-size: 13px; color: #6b7280;">ê¸ˆì•¡ë³„ ìë™ ê²°ì¬ì„  êµ¬ì„±</div>
                            </div>
                            <span style="color: #9ca3af;">â†’</span>
                        </div>
                    </div>
                    
                    <!-- ê·¼íƒœì‹ ì²­ì„œ -->
                    <div class="approval-menu-item" onclick="openApprovalForm('attendance')">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 24px;">ğŸ–ï¸</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 16px; color: #1f2937;">ê·¼íƒœì‹ ì²­ì„œ</div>
                                <div style="font-size: 13px; color: #6b7280;">íœ´ê°€/ì™¸ì¶œ/ì¡°í‡´ í†µí•©</div>
                            </div>
                            <span style="color: #9ca3af;">â†’</span>
                        </div>
                    </div>
                    
                    <!-- ì¶œì¥ì‹ ì²­ì„œ -->
                    <div class="approval-menu-item" onclick="openApprovalForm('trip')">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 24px;">âœˆï¸</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 16px; color: #1f2937;">ì¶œì¥ì‹ ì²­ì„œ</div>
                                <div style="font-size: 13px; color: #6b7280;">ì¶œì¥ ì „ ì‚¬ì „ ìŠ¹ì¸</div>
                            </div>
                            <span style="color: #9ca3af;">â†’</span>
                        </div>
                    </div>
                    
                    <!-- êµ¬ë§¤ìš”ì²­ì„œ -->
                    <div class="approval-menu-item" onclick="openApprovalForm('purchase')">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 24px;">ğŸ›’</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 16px; color: #1f2937;">êµ¬ë§¤ìš”ì²­ì„œ</div>
                                <div style="font-size: 13px; color: #6b7280;">ë¬¼í’ˆ êµ¬ë§¤ ìŠ¹ì¸</div>
                            </div>
                            <span style="color: #9ca3af;">â†’</span>
                        </div>
                    </div>
                    
                    <!-- ì¶œì¥ë³´ê³ ì„œ -->
                    <div class="approval-menu-item" onclick="openApprovalForm('trip-report')">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 24px;">ğŸ“Š</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 16px; color: #1f2937;">ì¶œì¥ë³´ê³ ì„œ</div>
                                <div style="font-size: 13px; color: #6b7280;">ì¶œì¥ í›„ ë³´ê³ </div>
                            </div>
                            <span style="color: #9ca3af;">â†’</span>
                        </div>
                    </div>
                    
                    <!-- ì‹œê°„ì™¸ê·¼ë¬´ì‹ ì²­ì„œ -->
                    <div class="approval-menu-item" onclick="openApprovalForm('overtime')">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 24px;">â°</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 16px; color: #1f2937;">ì‹œê°„ì™¸ê·¼ë¬´ì‹ ì²­ì„œ</div>
                                <div style="font-size: 13px; color: #6b7280;">ì•¼ê·¼/íŠ¹ê·¼ ìŠ¹ì¸</div>
                            </div>
                            <span style="color: #9ca3af;">â†’</span>
                        </div>
                    </div>
                    
                    <!-- ë²•ì¸ì¹´ë“œì‚¬ìš©ì‹ ì²­ì„œ -->
                    <div class="approval-menu-item" onclick="openApprovalForm('card')">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 24px;">ğŸ’³</span>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 16px; color: #1f2937;">ë²•ì¸ì¹´ë“œì‚¬ìš©ì‹ ì²­ì„œ</div>
                                <div style="font-size: 13px; color: #6b7280;">ë²•ì¸ì¹´ë“œ ì‚¬ì „ ìŠ¹ì¸</div>
                            </div>
                            <span style="color: #9ca3af;">â†’</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========================================
        // ì„¸ì…˜ ì²´í¬ ë° ì‚¬ìš©ì ì •ë³´ ë¡œë“œ
        // ========================================
        let currentUser = null;

        function checkSession() {
            const session = localStorage.getItem('dasol_session');
            
            if (!session) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                window.location.href = 'index.html';
                return false;
            }

            currentUser = JSON.parse(session);
            
            // ì„¸ì…˜ ìœ íš¨ì„± ê²€ì‚¬ (24ì‹œê°„)
            const sessionTime = new Date(currentUser.loginAt).getTime();
            const now = new Date().getTime();
            const hoursDiff = (now - sessionTime) / (1000 * 60 * 60);

            if (hoursDiff > 24) {
                alert('ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
                localStorage.removeItem('dasol_session');
                window.location.href = 'index.html';
                return false;
            }

            // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
            loadUserInfo();
            
            return true;
        }

        function loadUserInfo() {
            // í—¤ë”ì— ì‚¬ìš©ì ì´ë¦„ í‘œì‹œ
            const userNameElements = document.querySelectorAll('.user-name');
            userNameElements.forEach(el => {
                el.textContent = `${currentUser.name} ${currentUser.position}`;
            });

            // Kamilleë‹˜ì´ê±°ë‚˜ ê´€ë¦¬ìë©´ ê´€ë¦¬ ë©”ë‰´ í‘œì‹œ
            if (currentUser.isSuperAdmin || currentUser.isAdmin) {
                const adminMenu = document.getElementById('adminMenu');
                if (adminMenu) {
                    adminMenu.style.display = 'block';
                }
            }
        }

        function logout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('dasol_session');
                
                // ìë™ ë¡œê·¸ì¸ í•´ì œ
                const rememberMe = localStorage.getItem('dasol_remember_me');
                if (rememberMe !== 'true') {
                    localStorage.removeItem('dasol_saved_email');
                }
                
                window.location.href = 'index.html';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì„¸ì…˜ ì²´í¬
        if (!checkSession()) {
            // ì„¸ì…˜ ì²´í¬ ì‹¤íŒ¨ ì‹œ ì—¬ê¸°ì„œ ë©ˆì¶¤
        }

        // ë‚ ì§œ/ì‹œê°„ ì—…ë°ì´íŠ¸
        function updateDateTime() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long',
                hour: '2-digit',
                minute: '2-digit'
            };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('ko-KR', options);
        }

        updateDateTime();
        setInterval(updateDateTime, 60000);

        // ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸°
        function openRequestModal() {
            document.getElementById('requestModal').classList.add('active');
            
            // ì˜¤ëŠ˜ ë‚ ì§œ ìë™ ì„¤ì •
            const today = new Date();
            const todayStr = today.toISOString().split('T')[0];
            document.getElementById('samplingDate').value = todayStr;
            document.getElementById('receiptDate').value = todayStr;
            
            // ì„±ì ì„œ ë°œê¸‰ ì˜ˆì •ì¼ (ì±„ìˆ˜ì¼ + 7ì¼)
            const certificateDate = new Date(today);
            certificateDate.setDate(certificateDate.getDate() + 7);
            document.getElementById('certificateDate').value = certificateDate.toISOString().split('T')[0];
            
            // ì±„ìˆ˜ì¼ ë³€ê²½ ì‹œ ì„±ì ì„œ ë°œê¸‰ì¼ë„ ìë™ ë³€ê²½
            document.getElementById('samplingDate').addEventListener('change', function() {
                const samplingDate = new Date(this.value);
                const certDate = new Date(samplingDate);
                certDate.setDate(certDate.getDate() + 7);
                document.getElementById('certificateDate').value = certDate.toISOString().split('T')[0];
            });
        }

        function closeRequestModal() {
            document.getElementById('requestModal').classList.remove('active');
        }

        // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeRequestModal();
            }
        });

        // ì˜¤ë²„ë ˆì´ í´ë¦­ì‹œ ëª¨ë‹¬ ë‹«ê¸°
        document.getElementById('requestModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeRequestModal();
            }
        });

        // ì‚¬ì—…ì¥ ì •ë³´ ìë™ ì…ë ¥
        const facilityData = {
            'ABCì œì¡°': {
                businessNumber: '123-45-67890',
                address: 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123',
                phone: '02-1234-5678'
            },
            'XYZì‚°ì—…': {
                businessNumber: '234-56-78901',
                address: 'ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ë¶„ë‹¹êµ¬ 456',
                phone: '031-1234-5678'
            },
            'LMNì‹í’ˆ': {
                businessNumber: '345-67-89012',
                address: 'ì¸ì²œì‹œ ë‚¨ë™êµ¬ ë…¼í˜„ë™ 789',
                phone: '032-1234-5678'
            }
        };

        function loadFacilityInfo() {
            const facilityName = document.getElementById('facilityName').value;
            
            if (facilityName === 'new') {
                alert('ì‹ ê·œ ì‚¬ì—…ì¥ ë“±ë¡ ê¸°ëŠ¥ì€ ê°œë°œ ì˜ˆì •ì…ë‹ˆë‹¤.');
                document.getElementById('facilityName').value = '';
                return;
            }
            
            if (facilityData[facilityName]) {
                const data = facilityData[facilityName];
                document.getElementById('businessNumber').value = data.businessNumber;
                document.getElementById('address').value = data.address;
            } else {
                document.getElementById('businessNumber').value = '';
                document.getElementById('address').value = '';
            }
        }

        // ê¸ˆì•¡ ê³„ì‚°
        function calculateTotal() {
            const checkboxes = document.querySelectorAll('.checkbox-item input[type="checkbox"]:checked');
            let subtotal = 0;
            let items = [];
            
            checkboxes.forEach(checkbox => {
                const price = parseInt(checkbox.dataset.price);
                const name = checkbox.value;
                subtotal += price;
                items.push({ name, price });
            });
            
            const vat = Math.floor(subtotal * 0.1);
            const total = subtotal + vat;
            
            // í…Œì´ë¸” ì—…ë°ì´íŠ¸
            const tbody = document.getElementById('priceTableBody');
            if (items.length > 0) {
                tbody.innerHTML = items.map(item => `
                    <tr>
                        <td>${item.name}</td>
                        <td style="text-align: right;">${item.price.toLocaleString()}ì›</td>
                    </tr>
                `).join('');
            } else {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="2" style="text-align: center; color: #9ca3af;">
                            ë¶„ì„í•­ëª©ì„ ì„ íƒí•˜ë©´ ìë™ ê³„ì‚°ë©ë‹ˆë‹¤
                        </td>
                    </tr>
                `;
            }
            
            // í•©ê³„ ì—…ë°ì´íŠ¸
            document.getElementById('subtotal').textContent = subtotal.toLocaleString() + 'ì›';
            document.getElementById('vat').textContent = vat.toLocaleString() + 'ì›';
            document.getElementById('total').textContent = total.toLocaleString() + 'ì›';
        }

        // ì˜ë¢°ì„œ ì €ì¥
        function saveRequest() {
            // í•„ìˆ˜ ì…ë ¥ ì²´í¬
            const facilityName = document.getElementById('facilityName').value;
            const samplingDate = document.getElementById('samplingDate').value;
            const samplingTime = document.getElementById('samplingTime').value;
            const contactName = document.getElementById('contactName').value;
            const phone = document.getElementById('phone').value;
            const deliveryMethod = document.getElementById('deliveryMethod').value;
            
            if (!facilityName) {
                alert('ì‚¬ì—…ì¥ëª…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!samplingDate) {
                alert('ì±„ìˆ˜ ì˜ˆì •ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!contactName) {
                alert('ë‹´ë‹¹ìëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!phone) {
                alert('ì—°ë½ì²˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const checkedItems = document.querySelectorAll('.checkbox-item input[type="checkbox"]:checked');
            if (checkedItems.length === 0) {
                alert('ë¶„ì„í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ì˜ë¢°ë²ˆí˜¸ ìƒì„± (26-02-0001 í˜•ì‹)
            const now = new Date();
            const year = now.getFullYear().toString().slice(-2);
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const requestNumber = `${year}-${month}-0001`; // ì‹¤ì œë¡œëŠ” DBì—ì„œ ë§ˆì§€ë§‰ ë²ˆí˜¸ +1
            
            // ì‹œë£Œë²ˆí˜¸ ìƒì„± (ì ‘ìˆ˜ì¼ ê¸°ì¤€)
            const receiptDate = document.getElementById('receiptDate').value.replace(/-/g, '');
            const sampleNumber = `${receiptDate}-001`; // DS-20260215-001 í˜•ì‹
            
            // ì„ íƒëœ í•­ëª© ëª©ë¡
            const items = Array.from(checkedItems).map(cb => cb.value).join(', ');
            
            // ì¶”ê°€ ì •ë³´
            const sampleType = document.getElementById('sampleType').value;
            const peBottle = document.getElementById('peBottle').value;
            const glassBottle = document.getElementById('glassBottle').value;
            const totalVolume = document.getElementById('totalVolume').value;
            const samplingLocation = document.getElementById('samplingLocation').value;
            const specialNotes = document.getElementById('specialNotes').value;
            const certificateDate = document.getElementById('certificateDate').value;
            const paymentMethod = document.getElementById('paymentMethod').value;
            
            // ğŸ’° ìˆ˜ìˆ˜ë£Œ ê³„ì‚°
            const subtotalText = document.getElementById('subtotal').textContent;
            const totalText = document.getElementById('total').textContent;
            const salesAmount = parseInt(totalText.replace(/[^0-9]/g, ''));
            
            // ğŸ‘¤ ë‹´ë‹¹ ì˜ì—…ì‚¬ì› (ì‹¤ì œë¡œëŠ” ë¡œê·¸ì¸í•œ ì‚¬ìš©ì)
            const salesPerson = 'ë°•ì„ í˜¸';
            const salesTeam = 'ì˜ì—…1íŒ€';
            
            // ğŸ“‹ ì˜ë¢°ì„œ ë°ì´í„° ìƒì„± (Single Source of Truth!)
            const requestData = {
                requestNumber: requestNumber,
                receiptDate: document.getElementById('receiptDate').value,
                facilityName: facilityName,
                sampleNumber: sampleNumber,
                samplingDate: samplingDate,
                samplingTime: samplingTime,
                sampleType: sampleType,
                items: items,
                salesAmount: salesAmount,
                salesPerson: salesPerson,
                salesTeam: salesTeam,
                contactName: contactName,
                phone: phone,
                address: facilityData[facilityName]?.address || '',
                businessNumber: facilityData[facilityName]?.businessNumber || '',
                peBottle: peBottle,
                glassBottle: glassBottle,
                totalVolume: totalVolume,
                samplingLocation: samplingLocation,
                specialNotes: specialNotes,
                certificateDate: certificateDate,
                paymentMethod: paymentMethod,
                deliveryMethod: deliveryMethod,
                status: 'pending',
                createdAt: new Date().toISOString()
            };
            
            // ğŸ’¾ ì˜ë¢°ì„œ ì €ì¥
            const requests = JSON.parse(localStorage.getItem('requests') || '[]');
            requests.push(requestData);
            localStorage.setItem('requests', JSON.stringify(requests));
            
            // ğŸ”— ìë™ ì—°ë™ 1: ì—…ë¬´ì¼ì§€ ìƒì„±
            generateWorkLogFromRequest(requestData);
            
            // ğŸ”— ìë™ ì—°ë™ 2: ì ‘ìˆ˜ëŒ€ì¥ ìƒì„±
            generateReceptionLog(requestData);
            
            // ğŸ”— ìë™ ì—°ë™ 3: ì°¨ëŸ‰ìš´í–‰ì¼ì§€ ìƒì„±
            generateVehicleLogFromRequest(requestData);
            
            // ğŸ”— ìë™ ì—°ë™ 4: ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€ ìƒì„±
            generateSamplingRecordFromRequest(requestData);
            
            let deliveryText = '';
            if (deliveryMethod === 'email') deliveryText = 'ì´ë©”ì¼';
            else if (deliveryMethod === 'mail') deliveryText = 'ìš°í¸';
            else deliveryText = 'ì§ì ‘ìˆ˜ë ¹';
            
            alert(`âœ… ì˜ë¢°ì„œê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!\n\nğŸ“‹ ì˜ë¢°ë²ˆí˜¸: ${requestNumber}\nğŸ§ª ì‹œë£Œë²ˆí˜¸: ${sampleNumber}\nğŸ¢ ì‚¬ì—…ì¥: ${facilityName}\nğŸ‘¤ ë‹´ë‹¹: ${salesPerson}\nğŸ’° ìˆ˜ìˆ˜ë£Œ: ${totalText}\nğŸ“… ì±„ìˆ˜ì¼: ${samplingDate} ${samplingTime}\n\nâœ¨ ìë™ ì—°ë™ ì™„ë£Œ:\nâ€¢ ì—…ë¬´ì¼ì§€ (ë§¤ì¶œ ìë™ ê¸°ì¬)\nâ€¢ ì ‘ìˆ˜ëŒ€ì¥ (ìˆ˜ìˆ˜ë£Œ ìë™ ê¸°ì¬)\nâ€¢ ì°¨ëŸ‰ìš´í–‰ì¼ì§€\nâ€¢ ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€`);
            
            closeRequestModal();
            
            // ì—…ë¬´ì¼ì§€ ë³´ê¸°
            setTimeout(() => {
                if (confirm('ğŸ“ ìƒì„±ëœ ì—…ë¬´ì¼ì§€ë¥¼ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(ë§¤ì¶œì•¡ì´ ìë™ìœ¼ë¡œ ì§‘ê³„ë˜ì—ˆìŠµë‹ˆë‹¤)')) {
                    showWorkLogModal();
                }
            }, 500);
        }
        
        // ğŸ”— ìë™ ì—°ë™ 1: ì—…ë¬´ì¼ì§€ ìƒì„± (ì˜ë¢°ì„œ ê¸°ë°˜)
        function generateWorkLogFromRequest(requestData) {
            // ì˜¤ëŠ˜ ë‚ ì§œì˜ ì—…ë¬´ì¼ì§€ê°€ ìˆëŠ”ì§€ í™•ì¸
            const workLogs = JSON.parse(localStorage.getItem('workLogs') || '[]');
            const today = requestData.samplingDate;
            let todayLog = workLogs.find(log => log.date === today && log.writer === requestData.salesPerson);
            
            if (!todayLog) {
                // ìƒˆë¡œìš´ ì¼ì§€ ìƒì„±
                todayLog = {
                    date: today,
                    writer: requestData.salesPerson,
                    team: requestData.salesTeam,
                    visits: [],
                    expenses: {
                        fuel: 0,
                        toll: 0,
                        parking: 0,
                        meal: 0
                    },
                    collections: [],
                    totalDistance: 0,
                    totalSales: 0,
                    totalCollection: 0,
                    createdAt: new Date().toISOString()
                };
                workLogs.push(todayLog);
            }
            
            // ë°©ë¬¸ ê¸°ë¡ ì¶”ê°€
            todayLog.visits.push({
                requestNumber: requestData.requestNumber,
                facilityName: requestData.facilityName,
                address: requestData.address,
                distance: 0, // GPSë¡œ ì¸¡ì • ì˜ˆì •
                items: requestData.items,
                salesAmount: requestData.salesAmount,
                time: requestData.samplingTime
            });
            
            // ë§¤ì¶œ í•©ê³„ ìë™ ê³„ì‚°
            todayLog.totalSales = todayLog.visits.reduce((sum, visit) => sum + visit.salesAmount, 0);
            
            localStorage.setItem('workLogs', JSON.stringify(workLogs));
        }
        
        // ğŸ”— ìë™ ì—°ë™ 2: ì ‘ìˆ˜ëŒ€ì¥ ìƒì„±
        function generateReceptionLog(requestData) {
            const receptionLogs = JSON.parse(localStorage.getItem('receptionLogs') || '[]');
            
            receptionLogs.push({
                requestNumber: requestData.requestNumber,
                receiptDate: requestData.receiptDate,
                facilityName: requestData.facilityName,
                salesPerson: requestData.salesPerson,
                salesAmount: requestData.salesAmount,
                sampleType: requestData.sampleType,
                items: requestData.items,
                status: requestData.status,
                paymentMethod: requestData.paymentMethod,
                createdAt: new Date().toISOString()
            });
            
            localStorage.setItem('receptionLogs', JSON.stringify(receptionLogs));
        }
        
        // ğŸ”— ìë™ ì—°ë™ 3: ì°¨ëŸ‰ìš´í–‰ì¼ì§€ ìƒì„± (ì˜ë¢°ì„œ ê¸°ë°˜)
        function generateVehicleLogFromRequest(requestData) {
            const vehicleLogs = JSON.parse(localStorage.getItem('vehicleLogs') || '[]');
            const today = requestData.samplingDate;
            let todayLog = vehicleLogs.find(log => log.date === today && log.driver === requestData.salesPerson);
            
            if (!todayLog) {
                todayLog = {
                    date: today,
                    driver: requestData.salesPerson,
                    vehicleNumber: '49í˜¸ 8379', // ì‹¤ì œë¡œëŠ” ì„ íƒ
                    routes: [],
                    totalDistance: 0,
                    createdAt: new Date().toISOString()
                };
                vehicleLogs.push(todayLog);
            }
            
            // ë°©ë¬¸ì§€ ì¶”ê°€
            todayLog.routes.push({
                destination: requestData.facilityName,
                address: requestData.address,
                distance: 0, // GPSë¡œ ì¸¡ì • ì˜ˆì •
                purpose: 'ì‹œë£Œ ì±„ìˆ˜'
            });
            
            localStorage.setItem('vehicleLogs', JSON.stringify(vehicleLogs));
        }
        
        // ğŸ”— ìë™ ì—°ë™ 4: ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€ ìƒì„± (ì˜ë¢°ì„œ ê¸°ë°˜)
        function generateSamplingRecordFromRequest(requestData) {
            const samplingRecords = JSON.parse(localStorage.getItem('samplingRecords') || '[]');
            
            samplingRecords.push({
                requestNumber: requestData.requestNumber,
                sampleNumber: requestData.sampleNumber,
                receiptDate: requestData.receiptDate,
                facility: requestData.facilityName,
                address: requestData.address,
                samplingDate: requestData.samplingDate,
                samplingTime: requestData.samplingTime,
                sampleType: requestData.sampleType,
                samplingLocation: requestData.samplingLocation,
                peBottle: requestData.peBottle,
                glassBottle: requestData.glassBottle,
                totalVolume: requestData.totalVolume,
                items: requestData.items,
                purpose: 'ìê°€ì¸¡ì •ëŒ€í–‰',
                fieldConditions: {
                    weather: '',
                    temperature: '',
                    wasteTemp: { raw: '', discharge: '' },
                    wasteColor: { raw: '', discharge: '' },
                    conductivity: { raw: '', discharge: '' },
                    totalChlorine: { raw: '', discharge: '' },
                    freeChlorine: { raw: '', discharge: '' },
                    DO: { raw: '', discharge: '' },
                    pH: { raw: '', discharge: '' }
                },
                createdAt: new Date().toISOString()
            });
            
            localStorage.setItem('samplingRecords', JSON.stringify(samplingRecords));
        }
        
        // ì°¨ëŸ‰ìš´í–‰ì¼ì§€ ìë™ ìƒì„±
        
        // ì—…ë¬´ì¼ì§€ ëª¨ë‹¬
        function showWorkLog() {
            const workLogs = JSON.parse(localStorage.getItem('workLogs') || '[]');
            const vehicleLogs = JSON.parse(localStorage.getItem('vehicleLogs') || '[]');
            
            if (workLogs.length === 0) {
                alert('ìƒì„±ëœ ì—…ë¬´ì¼ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const lastWorkLog = workLogs[workLogs.length - 1];
            const lastVehicleLog = vehicleLogs[vehicleLogs.length - 1];
            
            let message = 'ğŸ“ ì—…ë¬´ì¼ì§€\n\n';
            message += `ë‚ ì§œ: ${lastWorkLog.date}\n`;
            message += `ì‘ì„±ì: ${lastWorkLog.writer}\n`;
            message += `ì‚¬ì—…ì¥: ${lastWorkLog.facility}\n`;
            message += `ì±„ìˆ˜ì‹œê°„: ${lastWorkLog.samplingTime}\n`;
            message += `ì‹œë£Œë²ˆí˜¸: ${lastWorkLog.sampleNumber}\n`;
            message += `ë¶„ì„í•­ëª©: ${lastWorkLog.items}\n\n`;
            
            message += 'ğŸš— ì°¨ëŸ‰ìš´í–‰ì¼ì§€\n\n';
            message += `ë‚ ì§œ: ${lastVehicleLog.date}\n`;
            message += `ìš´ì „ì: ${lastVehicleLog.driver}\n`;
            message += `ì°¨ëŸ‰ë²ˆí˜¸: ${lastVehicleLog.vehicleNumber}\n`;
            message += `ì¶œë°œì§€: ${lastVehicleLog.departure}\n`;
            message += `ëª©ì ì§€: ${lastVehicleLog.destination}\n`;
            message += `ìš©ë„: ${lastVehicleLog.purpose}\n`;
            
            alert(message);
        }
        
        // ì˜ë¢°ì ‘ìˆ˜ LIST ëª¨ë‹¬
        function openRequestListModal() {
            document.getElementById('requestListModal').classList.add('active');
        }
        
        function closeRequestListModal() {
            document.getElementById('requestListModal').classList.remove('active');
        }
        
        // í•„í„°ë§ (ì¶”í›„ êµ¬í˜„)
        function filterList() {
            console.log('í•„í„° ì ìš©');
            // ì‹¤ì œë¡œëŠ” ì—¬ê¸°ì„œ í•„í„° ì¡°ê±´ì— ë§ê²Œ ëª©ë¡ì„ ê°±ì‹ 
        }
        
        // ì˜ë¢° ìƒì„¸ë³´ê¸°
        function viewRequestDetail(requestNumber) {
            alert(`ì˜ë¢° ìƒì„¸ë³´ê¸°\n\nì˜ë¢°ë²ˆí˜¸: ${requestNumber}\n\n(ìƒì„¸ í™”ë©´ ê°œë°œ ì˜ˆì •)`);
        }
        
        // ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™
        function nextStep(requestNumber) {
            const confirmed = confirm(`${requestNumber} ì˜ë¢°ë¥¼ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`);
            if (confirmed) {
                alert('ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!');
                // ì‹¤ì œë¡œëŠ” ì—¬ê¸°ì„œ ìƒíƒœ ì—…ë°ì´íŠ¸
            }
        }
        
        // ì—…ë¬´ì¼ì§€ ëª¨ë‹¬
        function showWorkLogModal() {
            const workLogs = JSON.parse(localStorage.getItem('workLogs') || '[]');
            const modal = document.getElementById('workLogModal');
            const content = document.getElementById('workLogContent');
            
            if (workLogs.length === 0) {
                content.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #9ca3af;">
                        <p style="font-size: 18px; margin-bottom: 10px;">ğŸ“</p>
                        <p>ìƒì„±ëœ ì—…ë¬´ì¼ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p style="font-size: 14px; margin-top: 10px;">ì˜ë¢°ì„œë¥¼ ë“±ë¡í•˜ë©´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.</p>
                    </div>
                `;
            } else {
                content.innerHTML = workLogs.map((log, index) => `
                    <div style="background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 25px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid #f3f4f6;">
                            <h4 style="font-size: 18px; color: #1f2937;">ğŸ“ ì—…ë¬´ì¼ì§€ #${workLogs.length - index}</h4>
                            <span style="color: #6b7280;">ì‘ì„±ì¼: ${log.date}</span>
                        </div>
                        
                        <div style="margin-bottom: 20px; padding: 15px; background: #f9fafb; border-radius: 8px;">
                            <h5 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸ‘¤ ì‘ì„±ì ì •ë³´</h5>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 14px;">
                                <div>ì‘ì„±ì: ${log.writer}</div>
                                <div>ì†Œì†: ${log.team}</div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <h5 style="font-size: 14px; font-weight: 600; margin-bottom: 10px; color: #10b981;">ğŸ’° ì™¸ê·¼ì—…ë¬´ (ì˜ë¢°ì„œ ìë™ ì—°ë™)</h5>
                            <div style="overflow-x: auto;">
                                <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
                                    <thead>
                                        <tr style="background: #f3f4f6;">
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">ìˆœë²ˆ</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: left;">ì—…ì²´ëª…</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">ì˜ë¢°ë²ˆí˜¸</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">ê±°ë¦¬(km)</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: right;">ë§¤ì¶œì•¡</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${log.visits.map((visit, idx) => `
                                            <tr>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">${idx + 1}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb;">${visit.facilityName}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: center; color: #3b82f6;">${visit.requestNumber}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">${visit.distance || '0'}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: right; font-weight: 600;">â‚©${visit.salesAmount.toLocaleString()}</td>
                                            </tr>
                                        `).join('')}
                                        <tr style="background: #f9fafb; font-weight: 600;">
                                            <td colspan="3" style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">ì†Œê³„</td>
                                            <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">${log.totalDistance}km</td>
                                            <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: right; color: #10b981;">â‚©${log.totalSales.toLocaleString()}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px; padding: 15px; background: #fef3c7; border-radius: 8px;">
                            <h5 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸ’³ ë¹„ìš©</h5>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; font-size: 13px;">
                                <div>ì£¼ìœ ë¹„: â‚©${log.expenses.fuel.toLocaleString()}</div>
                                <div>í†µí–‰ë£Œ: â‚©${log.expenses.toll.toLocaleString()}</div>
                                <div>ì£¼ì°¨ë¹„: â‚©${log.expenses.parking.toLocaleString()}</div>
                                <div>ì‹ëŒ€: â‚©${log.expenses.meal.toLocaleString()}</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px;">
                            <label style="font-size: 13px; color: #6b7280; display: block; margin-bottom: 5px;">ì—…ë¬´ë‚´ìš© / ì°¨ëŸ‰ ìƒíƒœ ì ê²€ / ì˜ê²¬</label>
                            <textarea style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; min-height: 80px; font-size: 14px;" placeholder="ì—…ë¬´ ë‚´ìš©, ì°¨ëŸ‰ ìƒíƒœ, ì˜ê²¬ ë“±ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                        </div>
                    </div>
                `).join('');
            }
            
            modal.classList.add('active');
        }
        
        function closeWorkLogModal() {
            document.getElementById('workLogModal').classList.remove('active');
        }
        
        function printWorkLog() {
            window.print();
        }
        
        // ì°¨ëŸ‰ìš´í–‰ì¼ì§€ ëª¨ë‹¬
        function showVehicleLogModal() {
            const vehicleLogs = JSON.parse(localStorage.getItem('vehicleLogs') || '[]');
            const modal = document.getElementById('vehicleLogModal');
            const content = document.getElementById('vehicleLogContent');
            
            if (vehicleLogs.length === 0) {
                content.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #9ca3af;">
                        <p style="font-size: 18px; margin-bottom: 10px;">ğŸš—</p>
                        <p>ìƒì„±ëœ ì°¨ëŸ‰ìš´í–‰ì¼ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p style="font-size: 14px; margin-top: 10px;">ì˜ë¢°ì„œë¥¼ ë“±ë¡í•˜ë©´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.</p>
                    </div>
                `;
            } else {
                content.innerHTML = vehicleLogs.map((log, index) => `
                    <div style="background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 25px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid #f3f4f6;">
                            <h4 style="font-size: 18px; color: #1f2937;">ğŸš— ì°¨ëŸ‰ìš´í–‰ì¼ì§€ #${vehicleLogs.length - index}</h4>
                            <span style="color: #6b7280;">ìš´í–‰ì¼: ${log.date}</span>
                        </div>
                        
                        <div style="margin-bottom: 20px; padding: 15px; background: #f9fafb; border-radius: 8px;">
                            <h5 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸ‘¤ ìš´ì „ì ì •ë³´</h5>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 14px;">
                                <div>ìš´ì „ì: ${log.driver}</div>
                                <div>ì°¨ëŸ‰ë²ˆí˜¸: ${log.vehicleNumber}</div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <h5 style="font-size: 14px; font-weight: 600; margin-bottom: 10px; color: #3b82f6;">ğŸ—ºï¸ ìš´í–‰ ì§€ì—­ (ì˜ë¢°ì„œ ìë™ ì—°ë™)</h5>
                            <div style="overflow-x: auto;">
                                <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
                                    <thead>
                                        <tr style="background: #f3f4f6;">
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">ìˆœë²ˆ</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: left;">ìš´í–‰ì§€ì—­</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">ìš´í–‰ê±°ë¦¬(km)</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: left;">ìš©ë„</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${log.routes.map((route, idx) => `
                                            <tr>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">${idx + 1}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb;">${route.destination}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: center; font-weight: 600;">${route.distance || '0'}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb;">${route.purpose}</td>
                                            </tr>
                                        `).join('')}
                                        <tr style="background: #f9fafb; font-weight: 600;">
                                            <td colspan="2" style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">ì´ ìš´í–‰ê±°ë¦¬</td>
                                            <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: center; color: #3b82f6;">${log.totalDistance}km</td>
                                            <td style="padding: 10px; border: 1px solid #e5e7eb;"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px;">
                            <label style="font-size: 13px; color: #6b7280; display: block; margin-bottom: 5px;">ë¹„ê³ </label>
                            <textarea style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; min-height: 60px; font-size: 14px;" placeholder="ë¹„ê³ ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                        </div>
                    </div>
                `).join('');
            }
            
            modal.classList.add('active');
        }
        
        function closeVehicleLogModal() {
            document.getElementById('vehicleLogModal').classList.remove('active');
        }
        
        function printVehicleLog() {
            window.print();
        }
        
        // ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€ ë³´ê¸°
        // ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€ ëª¨ë‹¬
        function showSamplingRecordModal() {
            const samplingRecords = JSON.parse(localStorage.getItem('samplingRecords') || '[]');
            const modal = document.getElementById('samplingRecordModal');
            const content = document.getElementById('samplingRecordContent');
            
            if (samplingRecords.length === 0) {
                content.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #9ca3af;">
                        <p style="font-size: 18px; margin-bottom: 10px;">ğŸ§ª</p>
                        <p>ìƒì„±ëœ ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p style="font-size: 14px; margin-top: 10px;">ì˜ë¢°ì„œë¥¼ ë“±ë¡í•˜ë©´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.</p>
                    </div>
                `;
            } else {
                content.innerHTML = samplingRecords.map((record, index) => `
                    <div style="background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 25px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid #f3f4f6;">
                            <h4 style="font-size: 18px; color: #1f2937;">ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€ #${samplingRecords.length - index}</h4>
                            <span style="color: #6b7280;">ì‹œë£Œë²ˆí˜¸: ${record.sampleNumber}</span>
                        </div>
                        
                        <div style="margin-bottom: 20px; padding: 15px; background: #f9fafb; border-radius: 8px;">
                            <h5 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸ“‹ ì±„ì·¨ ì •ë³´</h5>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 14px;">
                                <div>ì ‘ìˆ˜ë²ˆí˜¸: ${record.requestNumber}</div>
                                <div>ì ‘ìˆ˜ì¼ì: ${record.receiptDate}</div>
                                <div>ì‚¬ì—…ì¥ëª…: ${record.facility}</div>
                                <div>ì¸¡ì •ìš©ë„: ${record.purpose}</div>
                            </div>
                            <div style="margin-top: 10px; font-size: 14px;">ì£¼ì†Œ: ${record.address}</div>
                        </div>
                        
                        <div style="margin-bottom: 20px; padding: 15px; background: #eff6ff; border-radius: 8px;">
                            <h5 style="font-size: 14px; font-weight: 600; margin-bottom: 10px;">ğŸ§ª ì‹œë£Œ ì±„ì·¨</h5>
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; font-size: 14px;">
                                <div>ì±„ì·¨ì¼ì‹œ: ${record.samplingDate} ${record.samplingTime}</div>
                                <div>ì‹œë£Œì¢…ë¥˜: ${record.sampleType}</div>
                                <div>ì±„ì·¨ì¥ì†Œ: ${record.samplingLocation}</div>
                                <div>PEë³‘: ${record.peBottle}ê°œ</div>
                                <div>ìœ ë¦¬ë³‘: ${record.glassBottle}ê°œ</div>
                                <div>ì´ ì‹œë£ŒëŸ‰: ${record.totalVolume}L</div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="font-size: 13px; color: #6b7280; display: block; margin-bottom: 5px;">ë¶„ì„í•­ëª©</label>
                            <div style="padding: 12px; background: #f9fafb; border-radius: 8px; font-size: 14px;">
                                ${record.items}
                            </div>
                        </div>
                        
                        <div style="padding: 15px; background: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b;">
                            <p style="font-size: 13px; color: #92400e; margin: 0;">
                                âš ï¸ í˜„ì¥ ì¡°ê±´(pH, ìˆ˜ì˜¨, DO ë“±)ì€ í˜„ì¥ì—ì„œ ì¸¡ì • í›„ ì…ë ¥í•©ë‹ˆë‹¤.
                            </p>
                        </div>
                    </div>
                `).join('');
            }
            
            modal.classList.add('active');
        }
        
        function closeSamplingRecordModal() {
            document.getElementById('samplingRecordModal').classList.remove('active');
        }
        
        function printSamplingRecord() {
            window.print();
        }
        
        // ì ‘ìˆ˜ëŒ€ì¥ ëª¨ë‹¬
        function showReceptionLogModal() {
            const receptionLogs = JSON.parse(localStorage.getItem('receptionLogs') || '[]');
            const modal = document.getElementById('receptionLogModal');
            const content = document.getElementById('receptionLogContent');
            
            if (receptionLogs.length === 0) {
                content.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #9ca3af;">
                        <p style="font-size: 18px; margin-bottom: 10px;">ğŸ“Š</p>
                        <p>ìƒì„±ëœ ì ‘ìˆ˜ëŒ€ì¥ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p style="font-size: 14px; margin-top: 10px;">ì˜ë¢°ì„œë¥¼ ë“±ë¡í•˜ë©´ ìë™ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.</p>
                    </div>
                `;
            } else {
                // ì›”ë³„ ê·¸ë£¹í™”
                const groupedByMonth = {};
                receptionLogs.forEach(log => {
                    const month = log.receiptDate.substring(0, 7); // YYYY-MM
                    if (!groupedByMonth[month]) {
                        groupedByMonth[month] = [];
                    }
                    groupedByMonth[month].push(log);
                });
                
                content.innerHTML = Object.keys(groupedByMonth).reverse().map(month => {
                    const logs = groupedByMonth[month];
                    const monthTotal = logs.reduce((sum, log) => sum + log.salesAmount, 0);
                    
                    return `
                        <div style="background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 25px; margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid #f3f4f6;">
                                <h4 style="font-size: 18px; color: #1f2937;">ğŸ“Š ${month.replace('-', 'ë…„ ')}ì›” ì ‘ìˆ˜ëŒ€ì¥</h4>
                                <span style="font-weight: 600; color: #10b981;">ì›” í•©ê³„: â‚©${monthTotal.toLocaleString()}</span>
                            </div>
                            
                            <div style="overflow-x: auto;">
                                <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
                                    <thead>
                                        <tr style="background: #f3f4f6;">
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: center; width: 120px;">ì˜ë¢°ë²ˆí˜¸</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: center; width: 100px;">ì ‘ìˆ˜ì¼</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: left;">ì—…ì²´ëª…</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: center; width: 80px;">ì‹œë£Œì¢…ë¥˜</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: center; width: 80px;">ë‹´ë‹¹ì</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: right; width: 100px;">ìˆ˜ìˆ˜ë£Œ</th>
                                            <th style="padding: 10px; border: 1px solid #e5e7eb; text-align: center; width: 80px;">ê²°ì œë°©ë²•</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${logs.map(log => `
                                            <tr>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: center; color: #3b82f6; font-weight: 600;">${log.requestNumber}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">${log.receiptDate}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb;">${log.facilityName}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">${log.sampleType}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">${log.salesPerson}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: right; font-weight: 600;">â‚©${log.salesAmount.toLocaleString()}</td>
                                                <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: center; font-size: 12px;">${log.paymentMethod}</td>
                                            </tr>
                                        `).join('')}
                                        <tr style="background: #f9fafb; font-weight: 600;">
                                            <td colspan="5" style="padding: 10px; border: 1px solid #e5e7eb; text-align: center;">ì›” í•©ê³„ (${logs.length}ê±´)</td>
                                            <td style="padding: 10px; border: 1px solid #e5e7eb; text-align: right; color: #10b981;">â‚©${monthTotal.toLocaleString()}</td>
                                            <td style="padding: 10px; border: 1px solid #e5e7eb;"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            modal.classList.add('active');
        }
        
        function closeReceptionLogModal() {
            document.getElementById('receptionLogModal').classList.remove('active');
        }
        
        function printReceptionLog() {
            window.print();
        }
        
        // ì˜ì—…íŒ€ ì „ìš© ëª¨ë“œ
        let selectedPhotoCategory = null;
        let currentLocation = null;
        
        function switchToSalesMode() {
            document.getElementById('salesModeOverlay').classList.add('active');
            updateSalesDateTime();
            loadTodaySchedule();
            getCurrentLocation();
            
            // ë‚ ì§œ/ì‹œê°„ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
            setInterval(updateSalesDateTime, 1000);
        }
        
        function exitSalesMode() {
            document.getElementById('salesModeOverlay').classList.remove('active');
        }
        
        function updateSalesDateTime() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('ko-KR', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'short'
            });
            const timeStr = now.toLocaleTimeString('ko-KR', {
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const element = document.getElementById('salesDateTime');
            if (element) {
                element.textContent = `${dateStr} ${timeStr}`;
            }
        }
        
        // GPS ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸°
        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        currentLocation = {
                            latitude: position.coords.latitude,
                            longitude: position.coords.longitude,
                            timestamp: new Date().toISOString()
                        };
                        console.log('í˜„ì¬ ìœ„ì¹˜:', currentLocation);
                    },
                    (error) => {
                        console.error('ìœ„ì¹˜ í™•ì¸ ì‹¤íŒ¨:', error);
                        alert('ìœ„ì¹˜ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.');
                    }
                );
            }
        }
        
        // ì²´í¬ì¸
        function checkIn() {
            getCurrentLocation();
            
            if (!currentLocation) {
                alert('ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const checkInData = {
                type: 'checkin',
                location: currentLocation,
                timestamp: new Date().toISOString(),
                user: document.getElementById('salesUserName').textContent
            };
            
            // ì²´í¬ì¸ ê¸°ë¡ ì €ì¥
            const checkIns = JSON.parse(localStorage.getItem('checkIns') || '[]');
            checkIns.push(checkInData);
            localStorage.setItem('checkIns', JSON.stringify(checkIns));
            
            alert('âœ… ì²´í¬ì¸ ì™„ë£Œ!\n\nìœ„ì¹˜: ' + currentLocation.latitude.toFixed(6) + ', ' + currentLocation.longitude.toFixed(6));
        }
        
        // ì²´í¬ì•„ì›ƒ
        function checkOut() {
            const checkIns = JSON.parse(localStorage.getItem('checkIns') || '[]');
            
            if (checkIns.length === 0) {
                alert('ì²´í¬ì¸ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const lastCheckIn = checkIns[checkIns.length - 1];
            
            if (lastCheckIn.type === 'checkout') {
                alert('ì´ë¯¸ ì²´í¬ì•„ì›ƒ í•˜ì…¨ìŠµë‹ˆë‹¤.');
                return;
            }
            
            getCurrentLocation();
            
            if (!currentLocation) {
                alert('ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const checkOutData = {
                type: 'checkout',
                location: currentLocation,
                timestamp: new Date().toISOString(),
                user: document.getElementById('salesUserName').textContent,
                checkInTime: lastCheckIn.timestamp
            };
            
            // ê±°ë¦¬ ê³„ì‚° (ê°„ë‹¨í•œ ì§ì„  ê±°ë¦¬)
            const distance = calculateDistance(
                lastCheckIn.location.latitude,
                lastCheckIn.location.longitude,
                currentLocation.latitude,
                currentLocation.longitude
            );
            
            checkOutData.distance = distance;
            
            checkIns.push(checkOutData);
            localStorage.setItem('checkIns', JSON.stringify(checkIns));
            
            alert(`â° ì²´í¬ì•„ì›ƒ ì™„ë£Œ!\n\nì´ë™ ê±°ë¦¬: ${distance.toFixed(1)}km`);
        }
        
        // ë‘ ì§€ì  ê°„ ê±°ë¦¬ ê³„ì‚° (Haversine formula)
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // ì§€êµ¬ ë°˜ì§€ë¦„ (km)
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }
        
        // ì˜¤ëŠ˜ì˜ ì¼ì • ë¡œë“œ
        function loadTodaySchedule() {
            const requests = JSON.parse(localStorage.getItem('requests') || '[]');
            const today = new Date().toISOString().split('T')[0];
            
            const todayRequests = requests.filter(req => req.samplingDate === today);
            
            const scheduleList = document.getElementById('scheduleList');
            const scheduleCount = document.getElementById('scheduleCount');
            
            scheduleCount.textContent = todayRequests.length;
            
            if (todayRequests.length === 0) {
                scheduleList.innerHTML = '<p style="text-align: center; color: #9ca3af; padding: 20px;">ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤</p>';
            } else {
                scheduleList.innerHTML = todayRequests.map(req => `
                    <div class="schedule-item">
                        <div class="time">â° ${req.samplingTime}</div>
                        <div class="facility">${req.facilityName}</div>
                        <div class="address">ğŸ“ ${req.address}</div>
                    </div>
                `).join('');
            }
        }
        
        // ì¹´ë©”ë¼ ëª¨ë‹¬
        function openCameraModal() {
            document.getElementById('cameraModal').classList.add('active');
            selectedPhotoCategory = null;
            document.getElementById('photoPreviewContainer').style.display = 'none';
            document.getElementById('captureBtn').style.display = 'inline-block';
            document.getElementById('savePhotoBtn').style.display = 'none';
            
            // ëª¨ë“  ë²„íŠ¼ ì„ íƒ í•´ì œ
            document.querySelectorAll('.photo-category-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
        }
        
        function closeCameraModal() {
            document.getElementById('cameraModal').classList.remove('active');
        }
        
        function selectPhotoCategory(button, category) {
            // ëª¨ë“  ë²„íŠ¼ ì„ íƒ í•´ì œ
            document.querySelectorAll('.photo-category-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // ì„ íƒëœ ë²„íŠ¼ í™œì„±í™”
            button.classList.add('selected');
            selectedPhotoCategory = category;
        }
        
        function triggerCamera() {
            if (!selectedPhotoCategory) {
                alert('ì‚¬ì§„ ë¶„ë¥˜ë¥¼ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            document.getElementById('cameraInput').click();
        }
        
        function handlePhotoCapture(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('photoPreview').src = e.target.result;
                document.getElementById('photoPreviewContainer').style.display = 'block';
                document.getElementById('captureBtn').style.display = 'none';
                document.getElementById('savePhotoBtn').style.display = 'inline-block';
            };
            reader.readAsDataURL(file);
        }
        
        function savePhoto() {
            const photoData = {
                category: selectedPhotoCategory,
                timestamp: new Date().toISOString(),
                location: currentLocation,
                memo: document.getElementById('photoMemo').value,
                user: document.getElementById('salesUserName').textContent,
                imageData: document.getElementById('photoPreview').src
            };
            
            // ì‚¬ì§„ ì €ì¥
            const photos = JSON.parse(localStorage.getItem('fieldPhotos') || '[]');
            photos.push(photoData);
            localStorage.setItem('fieldPhotos', JSON.stringify(photos));
            
            alert('ğŸ“¸ ì‚¬ì§„ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
            closeCameraModal();
        }
        
        function showPhotoGallery() {
            const photos = JSON.parse(localStorage.getItem('fieldPhotos') || '[]');
            
            if (photos.length === 0) {
                alert('ì €ì¥ëœ ì‚¬ì§„ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            alert(`ğŸ“· ì‚¬ì§„ ê°¤ëŸ¬ë¦¬\n\nì´ ${photos.length}ì¥ì˜ ì‚¬ì§„ì´ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\n(ê°¤ëŸ¬ë¦¬ í™”ë©´ ê°œë°œ ì˜ˆì •)`);
        }
        
        // ì—…ë¬´ì¼ì§€ ë“±ë¡/ìˆ˜ì •
        function registerWorkLog() {
            alert('ğŸ“ ì—…ë¬´ì¼ì§€ ì‹ ê·œ ë“±ë¡\n\ní˜„ì¥ íƒœë¸”ë¦¿ì—ì„œ ì§ì ‘ ì…ë ¥í•˜ê±°ë‚˜\nìˆ˜ë™ìœ¼ë¡œ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n(ê°œë°œ ì˜ˆì •)');
        }
        
        function editWorkLog() {
            const workLogs = JSON.parse(localStorage.getItem('workLogs') || '[]');
            if (workLogs.length === 0) {
                alert('ìˆ˜ì •í•  ì—…ë¬´ì¼ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            alert('âœï¸ ì—…ë¬´ì¼ì§€ ìˆ˜ì •\n\nìˆ˜ì •í•  í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”.\n\n(ê°œë°œ ì˜ˆì •)');
        }
        
        // ì°¨ëŸ‰ìš´í–‰ì¼ì§€ ë“±ë¡/ìˆ˜ì •
        function registerVehicleLog() {
            alert('ğŸš— ì°¨ëŸ‰ìš´í–‰ì¼ì§€ ì‹ ê·œ ë“±ë¡\n\nìˆ˜ë™ìœ¼ë¡œ ë“±ë¡í•˜ê±°ë‚˜\nì˜ë¢°ì„œì™€ ì—°ë™í•˜ì—¬ ìë™ ìƒì„±ë©ë‹ˆë‹¤.\n\n(ê°œë°œ ì˜ˆì •)');
        }
        
        function editVehicleLog() {
            const vehicleLogs = JSON.parse(localStorage.getItem('vehicleLogs') || '[]');
            if (vehicleLogs.length === 0) {
                alert('ìˆ˜ì •í•  ì°¨ëŸ‰ìš´í–‰ì¼ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            alert('âœï¸ ì°¨ëŸ‰ìš´í–‰ì¼ì§€ ìˆ˜ì •\n\nì¶œë°œì‹œê°„, ë„ì°©ì‹œê°„, ì£¼í–‰ê±°ë¦¬ ë“±ì„ ì…ë ¥í•˜ì„¸ìš”.\n\n(ê°œë°œ ì˜ˆì •)');
        }
        
        // ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€ ë“±ë¡/ìˆ˜ì •
        function registerSamplingRecord() {
            alert('ğŸ§ª ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€ ì‹ ê·œ ë“±ë¡\n\nì˜ë¢°ì„œ ë“±ë¡ ì‹œ ìë™ ìƒì„±ë˜ê±°ë‚˜\ní˜„ì¥ì—ì„œ ì§ì ‘ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n(ê°œë°œ ì˜ˆì •)');
        }
        
        function editSamplingRecord() {
            const samplingRecords = JSON.parse(localStorage.getItem('samplingRecords') || '[]');
            if (samplingRecords.length === 0) {
                alert('ìˆ˜ì •í•  ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€ê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            alert('âœï¸ ìˆ˜ì§ˆì±„ì·¨ê¸°ë¡ë¶€ ìˆ˜ì •\n\ní˜„ì¥ ì¸¡ì •ê°’(pH, ìˆ˜ì˜¨, DO ë“±)ì„ ì…ë ¥í•˜ì„¸ìš”.\n\n(ê°œë°œ ì˜ˆì •)');
        }
        
        // ìƒ˜í”Œ ë°ì´í„° ì´ˆê¸°í™” (ìµœì´ˆ 1íšŒ)
        function initializeSampleData() {
            // ì´ë¯¸ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ìŠ¤í‚µ
            if (localStorage.getItem('sampleDataInitialized')) {
                return;
            }
            
            const today = new Date().toISOString().split('T')[0];
            
            // ìƒ˜í”Œ ì˜ë¢°ì„œ 3ê±´
            const sampleRequests = [
                {
                    requestNumber: '26-02-0001',
                    receiptDate: today,
                    facilityName: 'ABCì œì¡°',
                    sampleNumber: today.replace(/-/g, '') + '-001',
                    samplingDate: today,
                    samplingTime: '10:00',
                    sampleType: 'ë°°ì¶œìˆ˜',
                    items: 'pH, COD, BOD, SS',
                    salesAmount: 187000,
                    salesPerson: 'ë°•ì„ í˜¸',
                    salesTeam: 'ì˜ì—…1íŒ€',
                    contactName: 'ê¹€ë‹´ë‹¹',
                    phone: '010-1234-5678',
                    address: 'ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123',
                    businessNumber: '123-45-67890',
                    peBottle: '2',
                    glassBottle: '1',
                    totalVolume: '2.5',
                    samplingLocation: '1ë²ˆ ë°°ìˆ˜êµ¬',
                    specialNotes: '',
                    certificateDate: today,
                    paymentMethod: 'ì„¸ê¸ˆê³„ì‚°ì„œ',
                    deliveryMethod: 'email',
                    status: 'pending',
                    createdAt: new Date().toISOString()
                },
                {
                    requestNumber: '26-02-0002',
                    receiptDate: today,
                    facilityName: 'XYZì‚°ì—…',
                    sampleNumber: today.replace(/-/g, '') + '-002',
                    samplingDate: today,
                    samplingTime: '14:00',
                    sampleType: 'ë°©ë¥˜ìˆ˜',
                    items: 'pH, T-N, T-P',
                    salesAmount: 93500,
                    salesPerson: 'ë°•ì„ í˜¸',
                    salesTeam: 'ì˜ì—…1íŒ€',
                    contactName: 'ì´ë¶€ì¥',
                    phone: '010-2345-6789',
                    address: 'ì¸ì²œì‹œ ë‚¨ë™êµ¬ ë…¼í˜„ë¡œ 456',
                    businessNumber: '234-56-78901',
                    peBottle: '1',
                    glassBottle: '1',
                    totalVolume: '2.0',
                    samplingLocation: 'ë°©ë¥˜êµ¬',
                    specialNotes: '',
                    certificateDate: today,
                    paymentMethod: 'í˜„ê¸ˆ',
                    deliveryMethod: 'direct',
                    status: 'pending',
                    createdAt: new Date().toISOString()
                },
                {
                    requestNumber: '26-02-0003',
                    receiptDate: today,
                    facilityName: 'LMNì‹í’ˆ',
                    sampleNumber: today.replace(/-/g, '') + '-003',
                    samplingDate: today,
                    samplingTime: '16:00',
                    sampleType: 'ë°°ì¶œìˆ˜',
                    items: 'pH, COD, SS, ìƒ‰ë„',
                    salesAmount: 120000,
                    salesPerson: 'ë°•ì„ í˜¸',
                    salesTeam: 'ì˜ì—…1íŒ€',
                    contactName: 'ë°•ê³¼ì¥',
                    phone: '010-3456-7890',
                    address: 'ê¹€í¬ì‹œ ì¥ê¸°ë™ 789',
                    businessNumber: '345-67-89012',
                    peBottle: '2',
                    glassBottle: '0',
                    totalVolume: '2.0',
                    samplingLocation: 'ìµœì¢… ë°°ìˆ˜êµ¬',
                    specialNotes: '',
                    certificateDate: today,
                    paymentMethod: 'ì„¸ê¸ˆê³„ì‚°ì„œ',
                    deliveryMethod: 'email',
                    status: 'pending',
                    createdAt: new Date().toISOString()
                }
            ];
            
            // ì˜ë¢°ì„œ ì €ì¥
            localStorage.setItem('requests', JSON.stringify(sampleRequests));
            
            // ê° ì˜ë¢°ì„œì— ëŒ€í•´ ì—°ë™ ë°ì´í„° ìƒì„±
            sampleRequests.forEach(req => {
                generateWorkLogFromRequest(req);
                generateReceptionLog(req);
                generateVehicleLogFromRequest(req);
                generateSamplingRecordFromRequest(req);
            });
            
            // ì´ˆê¸°í™” ì™„ë£Œ í‘œì‹œ
            localStorage.setItem('sampleDataInitialized', 'true');
            
            console.log('âœ… ìƒ˜í”Œ ë°ì´í„° ìƒì„± ì™„ë£Œ! ì´ì œ ì—…ë¬´ì¼ì§€, ì ‘ìˆ˜ëŒ€ì¥ì„ í™•ì¸í•´ë³´ì„¸ìš”!');
        }
        
        
        // ì „ìê²°ì¬ ëª¨ë‹¬
        function openApprovalModal() {
            document.getElementById('approvalModal').classList.add('active');
        }
        
        function closeApprovalModal() {
            document.getElementById('approvalModal').classList.remove('active');
        }
        
        // ì¸ì‚¬ê´€ë¦¬ í•˜ìœ„ ë©”ë‰´ í† ê¸€
        function toggleHRMenu() {
            const hrMenu = document.getElementById('hrSubMenu');
            if (hrMenu.style.display === 'none') {
                hrMenu.style.display = 'block';
            } else {
                hrMenu.style.display = 'none';
            }
        }
        
        function openApprovalForm(type) {
            window.location.href = `pages/approval/${type}.html`;
        }
        
        // ê²Œì‹œíŒ ê¸°ëŠ¥
        function openBoardWriteModal() {
            document.getElementById('boardWriteModal').classList.add('active');
        }
        
        function closeBoardWriteModal() {
            document.getElementById('boardWriteModal').classList.remove('active');
            document.getElementById('boardWriteForm').reset();
            document.getElementById('fileAttachmentInfo').style.display = 'none';
        }
        
        function openBoardDetailModal(postId) {
            // ì‹¤ì œë¡œëŠ” postIdë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            document.getElementById('boardDetailModal').classList.add('active');
        }
        
        function closeBoardDetailModal() {
            document.getElementById('boardDetailModal').classList.remove('active');
        }
        
        function handleFileSelect() {
            const fileInput = document.getElementById('boardFileInput');
            const info = document.getElementById('fileAttachmentInfo');
            
            if (fileInput.files.length > 0) {
                info.style.display = 'block';
            } else {
                info.style.display = 'none';
            }
        }
        
        function submitBoardPost() {
            const title = document.getElementById('boardTitle').value;
            const content = document.getElementById('boardContent').value;
            
            if (!title || !content) {
                alert('ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ì‹¤ì œë¡œëŠ” ì„œë²„ì— ì €ì¥
            alert('ê²Œì‹œê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
            closeBoardWriteModal();
        }
        
        function submitComment() {
            const comment = document.getElementById('commentInput').value;
            
            if (!comment) {
                alert('ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ì‹¤ì œë¡œëŠ” ì„œë²„ì— ì €ì¥
            alert('ëŒ“ê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
            document.getElementById('commentInput').value = '';
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìƒ˜í”Œ ë°ì´í„° ìë™ ìƒì„±
        initializeSampleData();
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìƒë‹¨ ê²Œì‹œíŒ ë Œë”ë§
        renderTopBoard();
        
        // ê³µì§€ì‚¬í•­ê³¼ ê´€ë³´ë„ ë Œë”ë§
        initializeNotices();
        initializeGovNotices();
        
        // ê³µì§€ì‚¬í•­ ë”ë³´ê¸°/ì ‘ê¸°
        function toggleNotices(listId, button) {
            const list = document.getElementById(listId);
            const hiddenItems = list.querySelectorAll('.notice-item.hidden');
            const isExpanded = button.textContent.includes('ì ‘ê¸°');
            
            if (isExpanded) {
                hiddenItems.forEach(item => item.classList.add('hidden'));
                button.textContent = 'ë”ë³´ê¸°';
            } else {
                hiddenItems.forEach(item => item.classList.remove('hidden'));
                button.textContent = 'ì ‘ê¸°';
            }
        }
        
        // ===== ê²Œì‹œíŒ í™•ì¥ ê¸°ëŠ¥ =====
        
        // ê²Œì‹œê¸€ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        function getBoardPosts() {
            const posts = localStorage.getItem('boardPosts');
            return posts ? JSON.parse(posts) : [];
        }
        
        // ê²Œì‹œê¸€ ì €ì¥
        function saveBoardPosts(posts) {
            localStorage.setItem('boardPosts', JSON.stringify(posts));
        }
        
        // ë‚ ì§œ í¬ë§·
        function formatBoardDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diff = now - date;
            
            if (diff < 60000) return 'ë°©ê¸ˆ ì „';
            if (diff < 3600000) return Math.floor(diff / 60000) + 'ë¶„ ì „';
            if (diff < 86400000) return Math.floor(diff / 3600000) + 'ì‹œê°„ ì „';
            if (diff < 172800000) return 'ì–´ì œ';
            
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            return `${month}-${day} ${hours}:${minutes}`;
        }
        
        // NEW íŒì • (24ì‹œê°„ ì´ë‚´)
        function isNewPost(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            return (now - date) < 86400000;
        }
        
        // ìƒë‹¨ ê²Œì‹œíŒ ë Œë”ë§ (ê°„ëµ ë²„ì „)
        function renderTopBoard() {
            const posts = getBoardPosts();
            const boardList = document.getElementById('boardPosts');
            
            if (posts.length === 0) {
                boardList.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: #9ca3af;">
                        <div style="font-size: 14px;">ì²« ë²ˆì§¸ ê²Œì‹œê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</div>
                    </div>
                `;
                return;
            }
            
            // ìµœëŒ€ 5ê°œë§Œ í‘œì‹œ (3ê°œ ë³´ì´ê³  2ê°œëŠ” ìˆ¨ê¹€)
            boardList.innerHTML = posts.slice(0, 5).map((post, index) => {
                const isNew = isNewPost(post.date);
                const hidden = index >= 3 ? ' hidden' : '';
                
                return `
                    <div class="notice-item${hidden}" onclick="openBoardDetailModal(${index})">
                        ${isNew ? '<span class="badge new">NEW</span>' : ''}
                        <span class="notice-title">${post.title}</span>
                        <span class="notice-date">${formatBoardDate(post.date)}</span>
                    </div>
                `;
            }).join('');
        }
        
        // ê²Œì‹œíŒ í™•ì¥
        function expandBoard() {
            document.getElementById('boardExpandView').classList.add('active');
            document.body.style.overflow = 'hidden'; // ë°°ê²½ ìŠ¤í¬ë¡¤ ë°©ì§€
            renderExpandedBoard();
        }
        
        // ê²Œì‹œíŒ ë‹«ê¸°
        function closeExpandBoard() {
            document.getElementById('boardExpandView').classList.remove('active');
            document.body.style.overflow = ''; // ë°°ê²½ ìŠ¤í¬ë¡¤ ë³µì›
        }
        
        // í™•ì¥ ê²Œì‹œíŒ ë Œë”ë§
        function renderExpandedBoard() {
            const posts = getBoardPosts();
            const boardList = document.getElementById('expandedBoardList');
            
            if (posts.length === 0) {
                boardList.innerHTML = `
                    <div style="text-align: center; padding: 80px 20px; color: #9ca3af;">
                        <div style="font-size: 64px; margin-bottom: 20px;">ğŸ“</div>
                        <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤</div>
                        <div>ì²« ë²ˆì§¸ ê²Œì‹œê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</div>
                    </div>
                `;
                return;
            }
            
            boardList.innerHTML = posts.map((post, index) => {
                const isNew = isNewPost(post.date);
                const hasFile = post.files && post.files.length > 0;
                
                return `
                    <div style="border-bottom: 1px solid #f3f4f6; padding: 20px 0; cursor: pointer; transition: all 0.2s;" 
                         onclick="openBoardDetailModal(${index})"
                         onmouseover="this.style.background='#f9fafb'; this.style.paddingLeft='10px'; this.style.paddingRight='10px'; this.style.margin='0 -10px';"
                         onmouseout="this.style.background='transparent'; this.style.paddingLeft='0'; this.style.paddingRight='0'; this.style.margin='0';">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <div style="font-size: 18px; font-weight: 600; color: #1f2937; display: flex; align-items: center; gap: 8px;">
                                ${isNew ? '<span style="padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 700; background: #ef4444; color: white;">NEW</span>' : ''}
                                ${hasFile ? '<span style="padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 700; background: #3b82f6; color: white;">ğŸ“</span>' : ''}
                                ${post.title}
                            </div>
                        </div>
                        <div style="font-size: 15px; color: #6b7280; margin-top: 8px; line-height: 1.6;">
                            ${post.content.substring(0, 100)}${post.content.length > 100 ? '...' : ''}
                        </div>
                        <div style="display: flex; gap: 15px; font-size: 14px; color: #9ca3af; margin-top: 8px;">
                            <span>ğŸ‘¤ ${post.author}</span>
                            <span>ğŸ“… ${formatBoardDate(post.date)}</span>
                            <span>ğŸ‘ï¸ ${post.views || 0}</span>
                            <span>ğŸ’¬ ${post.comments ? post.comments.length : 0}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // ê¸€ì“°ê¸° ëª¨ë‹¬ ì—´ê¸° (í™•ì¥ ë·°ì—ì„œ)
        function openBoardWriteModal() {
            document.getElementById('boardWriteModal').classList.add('active');
        }
        
        // ê¸€ì“°ê¸° ì œì¶œ ìˆ˜ì •
        function submitBoardPost() {
            const title = document.getElementById('boardTitle').value.trim();
            const content = document.getElementById('boardContent').value.trim();
            const fileInput = document.getElementById('boardFileInput');
            
            if (!title) {
                alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!content) {
                alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const posts = getBoardPosts();
            const newPost = {
                id: Date.now(),
                title: title,
                content: content,
                author: 'ê¹€ì˜ì—…',
                date: new Date().toISOString(),
                views: 0,
                comments: [],
                files: Array.from(fileInput.files).map(f => ({
                    name: f.name,
                    size: f.size,
                    uploadDate: new Date().toISOString()
                }))
            };
            
            posts.unshift(newPost);
            saveBoardPosts(posts);
            renderExpandedBoard();
            renderTopBoard(); // ìƒë‹¨ ê²Œì‹œíŒë„ ì—…ë°ì´íŠ¸
            closeBoardWriteModal();
            alert('ê²Œì‹œê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        
        // ìƒì„¸ë³´ê¸° ëª¨ë‹¬ (ì¸ë±ìŠ¤ ê¸°ë°˜)
        function openBoardDetailModal(index) {
            const posts = getBoardPosts();
            const post = posts[index];
            
            // ì¡°íšŒìˆ˜ ì¦ê°€
            post.views = (post.views || 0) + 1;
            posts[index] = post;
            saveBoardPosts(posts);
            
            const detailContent = document.getElementById('boardDetailContent');
            detailContent.innerHTML = `
                <div style="padding-bottom: 20px; border-bottom: 2px solid #f3f4f6;">
                    <h2 style="font-size: 20px; color: #1f2937; margin-bottom: 12px;">${post.title}</h2>
                    <div style="display: flex; gap: 15px; font-size: 14px; color: #6b7280; margin-bottom: 20px;">
                        <span>ğŸ‘¤ ${post.author}</span>
                        <span>ğŸ“… ${formatBoardDate(post.date)}</span>
                        <span>ğŸ‘ï¸ ${post.views}</span>
                    </div>
                    <div style="font-size: 15px; line-height: 1.7; color: #374151; white-space: pre-line;">
${post.content}
                    </div>
                    ${post.files && post.files.length > 0 ? `
                    <div style="margin-top: 15px; padding: 12px; background: #f9fafb; border-radius: 8px;">
                        <div style="font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">ğŸ“ ì²¨ë¶€íŒŒì¼ (3ì¼ í›„ ìë™ ì‚­ì œ)</div>
                        ${post.files.map(file => `
                            <div style="color: #667eea; font-size: 14px; margin-top: 4px;">ğŸ“„ ${file.name} (${(file.size / 1024).toFixed(1)}KB)</div>
                        `).join('')}
                    </div>
                    ` : ''}
                </div>
                
                <div style="margin-top: 20px;">
                    <div style="font-size: 16px; font-weight: 600; color: #1f2937; margin-bottom: 15px;">
                        ğŸ’¬ ëŒ“ê¸€ ${post.comments ? post.comments.length : 0}
                    </div>
                    
                    <div id="boardCommentList">
                        ${post.comments && post.comments.length > 0 ? post.comments.map(comment => `
                            <div style="padding: 12px; background: #f9fafb; border-radius: 8px; margin-bottom: 10px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span style="font-weight: 600; color: #374151;">${comment.author}</span>
                                    <span style="font-size: 13px; color: #9ca3af;">${formatBoardDate(comment.date)}</span>
                                </div>
                                <div style="font-size: 14px; color: #6b7280;">${comment.content}</div>
                            </div>
                        `).join('') : '<div style="text-align: center; color: #9ca3af; padding: 20px;">ì²« ë²ˆì§¸ ëŒ“ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</div>'}
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <textarea class="form-input" id="boardCommentInput" rows="3" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                        <button class="btn btn-primary" onclick="submitBoardComment(${index})" style="margin-top: 10px; width: 100%;">ëŒ“ê¸€ ì‘ì„±</button>
                    </div>
                </div>
            `;
            
            document.getElementById('boardDetailModal').classList.add('active');
            renderExpandedBoard(); // ì¡°íšŒìˆ˜ ì—…ë°ì´íŠ¸
            renderTopBoard(); // ìƒë‹¨ ê²Œì‹œíŒë„ ì—…ë°ì´íŠ¸
        }
        
        // ëŒ“ê¸€ ì œì¶œ
        function submitBoardComment(postIndex) {
            const commentInput = document.getElementById('boardCommentInput');
            const content = commentInput.value.trim();
            
            if (!content) {
                alert('ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const posts = getBoardPosts();
            const post = posts[postIndex];
            
            if (!post.comments) {
                post.comments = [];
            }
            
            post.comments.push({
                author: 'ê¹€ì˜ì—…',
                content: content,
                date: new Date().toISOString()
            });
            
            posts[postIndex] = post;
            saveBoardPosts(posts);
            
            openBoardDetailModal(postIndex);
            renderTopBoard(); // ìƒë‹¨ ê²Œì‹œíŒë„ ì—…ë°ì´íŠ¸
            alert('ëŒ“ê¸€ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        
        // ===== ê³µì§€ì‚¬í•­ ê¸°ëŠ¥ =====
        
        function getNotices() {
            const notices = localStorage.getItem('companyNotices');
            if (notices) return JSON.parse(notices);
            
            // ì´ˆê¸° ìƒ˜í”Œ ë°ì´í„°
            return [
                {id: 1, title: '2026ë…„ ìƒë°˜ê¸° ë³´ìˆ˜êµìœ¡ ì¼ì • ì•ˆë‚´', content: 'ë³´ìˆ˜êµìœ¡ ì¼ì • ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤...', type: 'normal', date: '2026-02-04T09:00:00Z', author: 'ì¸ì‚¬íŒ€', views: 0},
                {id: 2, title: 'ì„¤ ì—°íœ´ ì—…ë¬´ ì¼ì • ë° ë¹„ìƒ ì—°ë½ë§', content: 'ì„¤ ì—°íœ´ ì¼ì •...', type: 'important', date: '2026-01-28T09:00:00Z', author: 'ì´ë¬´íŒ€', views: 0},
                {id: 3, title: 'ì‹ ê·œ ì¥ë¹„ ë„ì… ì™„ë£Œ (IC ë¶„ì„ê¸°)', content: 'IC ë¶„ì„ê¸° ë„ì…...', type: 'normal', date: '2026-01-25T09:00:00Z', author: 'ë¶„ì„íŒ€', views: 0}
            ];
        }
        
        function saveNotices(notices) {
            localStorage.setItem('companyNotices', JSON.stringify(notices));
        }
        
        function initializeNotices() {
            const notices = getNotices();
            const noticeList = document.getElementById('companyNotices');
            
            noticeList.innerHTML = notices.slice(0, 5).map((notice, index) => {
                const isNew = isNewPost(notice.date);
                const hidden = index >= 3 ? ' hidden' : '';
                
                return `
                    <div class="notice-item${hidden}" onclick="openNoticeDetailModal(${index})">
                        ${isNew ? '<span class="badge new">NEW</span>' : ''}
                        ${notice.type === 'important' ? '<span class="badge important">ì¤‘ìš”</span>' : ''}
                        <span class="notice-title">${notice.title}</span>
                        <span class="notice-date">${formatBoardDate(notice.date)}</span>
                    </div>
                `;
            }).join('');
        }
        
        function expandNotice() {
            document.getElementById('noticeExpandView').classList.add('active');
            document.body.style.overflow = 'hidden';
            renderExpandedNotice();
        }
        
        function closeNoticeExpand() {
            document.getElementById('noticeExpandView').classList.remove('active');
            document.body.style.overflow = '';
        }
        
        function renderExpandedNotice() {
            const notices = getNotices();
            const noticeList = document.getElementById('expandedNoticeList');
            
            if (notices.length === 0) {
                noticeList.innerHTML = '<div style="text-align: center; padding: 80px 20px; color: #9ca3af;"><div style="font-size: 64px; margin-bottom: 20px;">ğŸ“¢</div><div style="font-size: 18px; font-weight: 600;">ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</div></div>';
                return;
            }
            
            noticeList.innerHTML = notices.map((notice, index) => {
                const isNew = isNewPost(notice.date);
                return `
                    <div style="border-bottom: 1px solid #f3f4f6; padding: 20px 0; cursor: pointer; transition: all 0.2s;" 
                         onclick="openNoticeDetailModal(${index})"
                         onmouseover="this.style.background='#f9fafb';"
                         onmouseout="this.style.background='transparent';">
                        <div style="font-size: 18px; font-weight: 600; color: #1f2937; display: flex; align-items: center; gap: 8px;">
                            ${isNew ? '<span style="padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 700; background: #ef4444; color: white;">NEW</span>' : ''}
                            ${notice.type === 'important' ? '<span style="padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 700; background: #f59e0b; color: white;">ì¤‘ìš”</span>' : ''}
                            ${notice.title}
                        </div>
                        <div style="font-size: 15px; color: #6b7280; margin-top: 8px;">${notice.content.substring(0, 100)}...</div>
                        <div style="display: flex; gap: 15px; font-size: 14px; color: #9ca3af; margin-top: 8px;">
                            <span>ğŸ‘¤ ${notice.author}</span>
                            <span>ğŸ“… ${formatBoardDate(notice.date)}</span>
                            <span>ğŸ‘ï¸ ${notice.views || 0}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function openNoticeWriteModal() {
            document.getElementById('noticeWriteModal').classList.add('active');
        }
        
        function closeNoticeWriteModal() {
            document.getElementById('noticeWriteModal').classList.remove('active');
        }
        
        function submitNotice() {
            const title = document.getElementById('noticeTitle').value.trim();
            const content = document.getElementById('noticeContent').value.trim();
            const type = document.getElementById('noticeType').value;
            
            if (!title || !content) {
                alert('ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            const notices = getNotices();
            notices.unshift({
                id: Date.now(),
                title: title,
                content: content,
                type: type,
                date: new Date().toISOString(),
                author: 'ê´€ë¦¬ì',
                views: 0
            });
            
            saveNotices(notices);
            initializeNotices();
            renderExpandedNotice();
            closeNoticeWriteModal();
            alert('ê³µì§€ì‚¬í•­ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        
        function openNoticeDetailModal(index) {
            const notices = getNotices();
            const notice = notices[index];
            
            notice.views = (notice.views || 0) + 1;
            notices[index] = notice;
            saveNotices(notices);
            
            document.getElementById('noticeDetailContent').innerHTML = `
                <div style="padding-bottom: 20px; border-bottom: 2px solid #f3f4f6;">
                    <h2 style="font-size: 20px; color: #1f2937; margin-bottom: 12px;">${notice.title}</h2>
                    <div style="display: flex; gap: 15px; font-size: 14px; color: #6b7280; margin-bottom: 20px;">
                        <span>ğŸ‘¤ ${notice.author}</span>
                        <span>ğŸ“… ${formatBoardDate(notice.date)}</span>
                        <span>ğŸ‘ï¸ ${notice.views}</span>
                    </div>
                    <div style="font-size: 15px; line-height: 1.7; color: #374151; white-space: pre-line;">${notice.content}</div>
                </div>
            `;
            
            document.getElementById('noticeDetailModal').classList.add('active');
            initializeNotices();
            renderExpandedNotice();
        }
        
        function closeNoticeDetailModal() {
            document.getElementById('noticeDetailModal').classList.remove('active');
        }
        
        // ===== ê´€ë³´ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ =====
        
        function getGovNotices() {
            const govNotices = localStorage.getItem('govNotices');
            if (govNotices) return JSON.parse(govNotices);
            
            // ì´ˆê¸° ìƒ˜í”Œ ë°ì´í„°
            return [
                {id: 1, title: 'ìˆ˜ì§ˆí™˜ê²½ë³´ì „ë²• ì‹œí–‰ê·œì¹™ ì¼ë¶€ê°œì •', keyword: 'ë¨¹ëŠ”ë¬¼', content: 'ìˆ˜ì§ˆí™˜ê²½ë³´ì „ë²• ì‹œí–‰ê·œì¹™ì´ ì¼ë¶€ ê°œì •ë˜ì—ˆìŠµë‹ˆë‹¤...', date: '2026-02-01T09:00:00Z', views: 0},
                {id: 2, title: 'ì¸¡ì •ë¶„ì„ê¸°ê´€ ì •ë„ê´€ë¦¬ ì§€ì¹¨ ê°œì •', keyword: 'ìˆ˜ì§ˆí™˜ê²½', content: 'ì¸¡ì •ë¶„ì„ê¸°ê´€ ì •ë„ê´€ë¦¬ ì§€ì¹¨ì´ ê°œì •ë˜ì—ˆìŠµë‹ˆë‹¤...', date: '2026-01-28T09:00:00Z', views: 0},
                {id: 3, title: 'ë¨¹ëŠ”ë¬¼ ìˆ˜ì§ˆê¸°ì¤€ í•­ëª© ì¶”ê°€ ê³ ì‹œ', keyword: 'ë¨¹ëŠ”ë¬¼', content: 'ë¨¹ëŠ”ë¬¼ ìˆ˜ì§ˆê¸°ì¤€ì— ìƒˆë¡œìš´ í•­ëª©ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤...', date: '2026-01-15T09:00:00Z', views: 0}
            ];
        }
        
        function saveGovNotices(govNotices) {
            localStorage.setItem('govNotices', JSON.stringify(govNotices));
        }
        
        function initializeGovNotices() {
            const govNotices = getGovNotices();
            const govNoticeList = document.getElementById('govNotices');
            
            govNoticeList.innerHTML = govNotices.slice(0, 5).map((notice, index) => {
                const isNew = isNewPost(notice.date);
                const hidden = index >= 3 ? ' hidden' : '';
                
                return `
                    <div class="notice-item${hidden}" onclick="openGovNoticeDetailModal(${index})">
                        ${isNew ? '<span class="badge new">NEW</span>' : ''}
                        <span class="badge keyword">${notice.keyword}</span>
                        <span class="notice-title">${notice.title}</span>
                        <span class="notice-date">${formatBoardDate(notice.date)}</span>
                    </div>
                `;
            }).join('');
        }
        
        function expandGovNotice() {
            document.getElementById('govNoticeExpandView').classList.add('active');
            document.body.style.overflow = 'hidden';
            renderExpandedGovNotice();
        }
        
        function closeGovNoticeExpand() {
            document.getElementById('govNoticeExpandView').classList.remove('active');
            document.body.style.overflow = '';
        }
        
        function renderExpandedGovNotice() {
            const govNotices = getGovNotices();
            const govNoticeList = document.getElementById('expandedGovNoticeList');
            
            if (govNotices.length === 0) {
                govNoticeList.innerHTML = '<div style="text-align: center; padding: 80px 20px; color: #9ca3af;"><div style="font-size: 64px; margin-bottom: 20px;">ğŸ“°</div><div style="font-size: 18px; font-weight: 600;">ê´€ë³´ê°€ ì—†ìŠµë‹ˆë‹¤</div></div>';
                return;
            }
            
            govNoticeList.innerHTML = govNotices.map((notice, index) => {
                const isNew = isNewPost(notice.date);
                return `
                    <div style="border-bottom: 1px solid #f3f4f6; padding: 20px 0; cursor: pointer; transition: all 0.2s;" 
                         onclick="openGovNoticeDetailModal(${index})"
                         onmouseover="this.style.background='#f9fafb';"
                         onmouseout="this.style.background='transparent';">
                        <div style="font-size: 18px; font-weight: 600; color: #1f2937; display: flex; align-items: center; gap: 8px;">
                            ${isNew ? '<span style="padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 700; background: #ef4444; color: white;">NEW</span>' : ''}
                            <span style="padding: 4px 10px; border-radius: 6px; font-size: 12px; font-weight: 700; background: #3b82f6; color: white;">${notice.keyword}</span>
                            ${notice.title}
                        </div>
                        <div style="font-size: 15px; color: #6b7280; margin-top: 8px;">${notice.content.substring(0, 100)}...</div>
                        <div style="display: flex; gap: 15px; font-size: 14px; color: #9ca3af; margin-top: 8px;">
                            <span>ğŸ“… ${formatBoardDate(notice.date)}</span>
                            <span>ğŸ‘ï¸ ${notice.views || 0}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function openGovNoticeDetailModal(index) {
            const govNotices = getGovNotices();
            const notice = govNotices[index];
            
            notice.views = (notice.views || 0) + 1;
            govNotices[index] = notice;
            saveGovNotices(govNotices);
            
            document.getElementById('govNoticeDetailContent').innerHTML = `
                <div style="padding-bottom: 20px; border-bottom: 2px solid #f3f4f6;">
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                        <span style="padding: 6px 12px; border-radius: 8px; font-size: 13px; font-weight: 700; background: #3b82f6; color: white;">${notice.keyword}</span>
                    </div>
                    <h2 style="font-size: 20px; color: #1f2937; margin-bottom: 12px;">${notice.title}</h2>
                    <div style="display: flex; gap: 15px; font-size: 14px; color: #6b7280; margin-bottom: 20px;">
                        <span>ğŸ“… ${formatBoardDate(notice.date)}</span>
                        <span>ğŸ‘ï¸ ${notice.views}</span>
                    </div>
                    <div style="font-size: 15px; line-height: 1.7; color: #374151; white-space: pre-line;">${notice.content}</div>
                </div>
            `;
            
            document.getElementById('govNoticeDetailModal').classList.add('active');
            initializeGovNotices();
            renderExpandedGovNotice();
        }
        
        function closeGovNoticeDetailModal() {
            document.getElementById('govNoticeDetailModal').classList.remove('active');
        }
        
        // ê³µì§€ì‚¬í•­ ë”ë³´ê¸°/ì ‘ê¸° (ê¸°ì¡´ í•¨ìˆ˜ ìœ ì§€)
        function toggleNotices(listId, button) {
            const list = document.getElementById(listId);
            const hiddenItems = list.querySelectorAll('.notice-item.hidden');
            const isExpanded = button.textContent.includes('ì ‘ê¸°');
            
            if (isExpanded) {
                hiddenItems.forEach(item => item.classList.add('hidden'));
                button.textContent = 'ë”ë³´ê¸°';
            } else {
                hiddenItems.forEach(item => item.classList.remove('hidden'));
                button.textContent = 'ì ‘ê¸°';
            }
        }
    </script>
    
    <!-- ê²Œì‹œíŒ í™•ì¥ ë·° -->
    <div class="modal-overlay" id="boardExpandView" style="align-items: flex-start; padding-top: 40px; overflow: hidden;">
        <div style="background: white; border-radius: 16px; width: 95%; max-width: 1400px; height: 85vh; display: flex; flex-direction: column; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
            <!-- í—¤ë” (ê³ ì •) -->
            <div style="padding: 30px; border-bottom: 2px solid #f3f4f6; display: flex; justify-content: space-between; align-items: center; background: white;">
                <h2 style="font-size: 28px; color: #1f2937; display: flex; align-items: center; gap: 12px;">ğŸ’¬ ì§ì› ê²Œì‹œíŒ</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" onclick="openBoardWriteModal()">+ ê¸€ì“°ê¸°</button>
                    <button class="close-btn" onclick="closeExpandBoard()" style="width: 40px; height: 40px;">âœ•</button>
                </div>
            </div>
            
            <!-- ê²Œì‹œê¸€ ëª©ë¡ (ìŠ¤í¬ë¡¤ ì˜ì—­) -->
            <div style="padding: 30px; overflow-y: auto; flex: 1;">
                <div id="expandedBoardList">
                    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>
        </div>
    </div>
    
    
    <!-- ê³µì§€ì‚¬í•­ í™•ì¥ ë·° -->
    <div class="modal-overlay" id="noticeExpandView" style="align-items: flex-start; padding-top: 40px; overflow: hidden;">
        <div style="background: white; border-radius: 16px; width: 95%; max-width: 1400px; height: 85vh; display: flex; flex-direction: column; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
            <!-- í—¤ë” (ê³ ì •) -->
            <div style="padding: 30px; border-bottom: 2px solid #f3f4f6; display: flex; justify-content: space-between; align-items: center; background: white;">
                <h2 style="font-size: 28px; color: #1f2937; display: flex; align-items: center; gap: 12px;">ğŸ“¢ íšŒì‚¬ ê³µì§€ì‚¬í•­</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" onclick="openNoticeWriteModal()">+ ì‘ì„±</button>
                    <button class="close-btn" onclick="closeNoticeExpand()" style="width: 40px; height: 40px;">âœ•</button>
                </div>
            </div>
            
            <!-- ê³µì§€ì‚¬í•­ ëª©ë¡ (ìŠ¤í¬ë¡¤ ì˜ì—­) -->
            <div style="padding: 30px; overflow-y: auto; flex: 1;">
                <div id="expandedNoticeList">
                    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- ê´€ë³´ í™•ì¥ ë·° -->
    <div class="modal-overlay" id="govNoticeExpandView" style="align-items: flex-start; padding-top: 40px; overflow: hidden;">
        <div style="background: white; border-radius: 16px; width: 95%; max-width: 1400px; height: 85vh; display: flex; flex-direction: column; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
            <!-- í—¤ë” (ê³ ì •) -->
            <div style="padding: 30px; border-bottom: 2px solid #f3f4f6; display: flex; justify-content: space-between; align-items: center; background: white;">
                <h2 style="font-size: 28px; color: #1f2937; display: flex; align-items: center; gap: 12px;">ğŸ“° ê´€ë³´ ì—…ë°ì´íŠ¸</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-secondary" onclick="alert('ê´€ë³´ëŠ” ìë™ ìˆ˜ì§‘ë©ë‹ˆë‹¤')" style="background: #3b82f6; color: white;">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
                    <button class="close-btn" onclick="closeGovNoticeExpand()" style="width: 40px; height: 40px;">âœ•</button>
                </div>
            </div>
            
            <!-- ê´€ë³´ ëª©ë¡ (ìŠ¤í¬ë¡¤ ì˜ì—­) -->
            <div style="padding: 30px; overflow-y: auto; flex: 1;">
                <div id="expandedGovNoticeList">
                    <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- ê²Œì‹œíŒ ê¸€ì“°ê¸° ëª¨ë‹¬ -->
    <div class="modal-overlay" id="boardWriteModal">
        <div class="modal-container" style="max-width: 700px;">
            <div class="modal-header">
                <h3>âœï¸ ê²Œì‹œê¸€ ì‘ì„±</h3>
                <button class="close-btn" onclick="closeBoardWriteModal()">âœ•</button>
            </div>
            
            <div class="modal-body">
                <form id="boardWriteForm">
                    <div class="form-group">
                        <label class="form-label">ì œëª©</label>
                        <input type="text" class="form-input" id="boardTitle" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ë‚´ìš©</label>
                        <textarea class="form-input" id="boardContent" rows="8" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">íŒŒì¼ ì²¨ë¶€</label>
                        <input type="file" class="form-input" id="boardFileInput" onchange="handleFileSelect()" multiple>
                        <div id="fileAttachmentInfo" style="display: none; margin-top: 10px; padding: 12px; background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 8px;">
                            <div style="display: flex; align-items: start; gap: 10px;">
                                <span style="font-size: 20px;">âš ï¸</span>
                                <div>
                                    <div style="font-weight: 600; color: #92400e; margin-bottom: 4px;">íŒŒì¼ ìë™ ì‚­ì œ ì•ˆë‚´</div>
                                    <div style="font-size: 14px; color: #78350f;">
                                        ì²¨ë¶€ëœ íŒŒì¼ì€ <strong>3ì¼ í›„ ìë™ìœ¼ë¡œ ì‚­ì œ</strong>ë©ë‹ˆë‹¤.<br>
                                        ì¤‘ìš”í•œ íŒŒì¼ì€ ë³„ë„ë¡œ ë³´ê´€í•´ì£¼ì„¸ìš”.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeBoardWriteModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="submitBoardPost()">ë“±ë¡</button>
            </div>
        </div>
    </div>
    
    <!-- ê²Œì‹œíŒ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
    <div class="modal-overlay" id="boardDetailModal">
        <div class="modal-container" style="max-width: 700px;">
            <div class="modal-header">
                <h3>ğŸ’¬ ê²Œì‹œê¸€ ë³´ê¸°</h3>
                <button class="close-btn" onclick="closeBoardDetailModal()">âœ•</button>
            </div>
            
            <div class="modal-body" id="boardDetailContent">
                <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeBoardDetailModal()">ë‹«ê¸°</button>
            </div>
        </div>
    </div>
    
    <!-- ê³µì§€ì‚¬í•­ ì‘ì„± ëª¨ë‹¬ -->
    <div class="modal-overlay" id="noticeWriteModal">
        <div class="modal-container" style="max-width: 700px;">
            <div class="modal-header">
                <h3>âœï¸ ê³µì§€ì‚¬í•­ ì‘ì„±</h3>
                <button class="close-btn" onclick="closeNoticeWriteModal()">âœ•</button>
            </div>
            
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">ì œëª©</label>
                    <input type="text" class="form-input" id="noticeTitle" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>
                
                <div class="form-group">
                    <label class="form-label">êµ¬ë¶„</label>
                    <select class="form-input" id="noticeType">
                        <option value="normal">ì¼ë°˜</option>
                        <option value="important">ì¤‘ìš”</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ë‚´ìš©</label>
                    <textarea class="form-input" id="noticeContent" rows="10" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">íŒŒì¼ ì²¨ë¶€</label>
                    <input type="file" class="form-input" id="noticeFileInput" multiple>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeNoticeWriteModal()">ì·¨ì†Œ</button>
                <button class="btn btn-primary" onclick="submitNotice()">ë“±ë¡</button>
            </div>
        </div>
    </div>
    
    <!-- ê³µì§€ì‚¬í•­ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
    <div class="modal-overlay" id="noticeDetailModal">
        <div class="modal-container" style="max-width: 700px;">
            <div class="modal-header">
                <h3>ğŸ“¢ ê³µì§€ì‚¬í•­</h3>
                <button class="close-btn" onclick="closeNoticeDetailModal()">âœ•</button>
            </div>
            
            <div class="modal-body" id="noticeDetailContent">
                <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeNoticeDetailModal()">ë‹«ê¸°</button>
            </div>
        </div>
    </div>
    
    <!-- ê´€ë³´ ìƒì„¸ë³´ê¸° ëª¨ë‹¬ -->
    <div class="modal-overlay" id="govNoticeDetailModal">
        <div class="modal-container" style="max-width: 700px;">
            <div class="modal-header">
                <h3>ğŸ“° ê´€ë³´</h3>
                <button class="close-btn" onclick="closeGovNoticeDetailModal()">âœ•</button>
            </div>
            
            <div class="modal-body" id="govNoticeDetailContent">
                <!-- JavaScriptë¡œ ë™ì  ìƒì„± -->
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeGovNoticeDetailModal()">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        // ì°¨ëŸ‰ ê³„ì•½ ë§Œë£Œ ì•ŒëŒ ì²´í¬
        function checkVehicleExpiration() {
            const vehicles = JSON.parse(localStorage.getItem('dasol_vehicles') || '[]');
            const vehicleBtn = document.getElementById('vehicleManagementBtn');
            
            if (!vehicleBtn || vehicles.length === 0) return;
            
            const today = new Date();
            let expiringCount = 0;
            
            vehicles.forEach(vehicle => {
                if (vehicle.contractEndDate) {
                    const endDate = new Date(vehicle.contractEndDate);
                    const daysUntilExpiry = Math.ceil((endDate - today) / (1000 * 60 * 60 * 24));
                    
                    // 60ì¼(2ê°œì›”) ì´ë‚´ì´ê³  ì•„ì§ ë§Œë£Œë˜ì§€ ì•Šì€ ê²½ìš°
                    if (daysUntilExpiry <= 60 && daysUntilExpiry > 0) {
                        expiringCount++;
                    }
                }
            });
            
            // ë§Œë£Œ ì„ë°• ì°¨ëŸ‰ì´ ìˆìœ¼ë©´ ë²„íŠ¼ì„ ë¹¨ê°›ê²Œ
            if (expiringCount > 0) {
                vehicleBtn.style.background = '#ef4444';
                vehicleBtn.style.color = 'white';
                vehicleBtn.style.fontWeight = '700';
                vehicleBtn.style.boxShadow = '0 0 20px rgba(239, 68, 68, 0.5)';
                vehicleBtn.innerHTML = `ğŸš— ì°¨ëŸ‰ê´€ë¦¬ <span style="background: white; color: #ef4444; padding: 2px 8px; border-radius: 12px; font-size: 12px; margin-left: 8px;">${expiringCount}</span>`;
                
                // í˜¸ë²„ íš¨ê³¼
                vehicleBtn.onmouseover = function() {
                    this.style.background = '#dc2626';
                };
                vehicleBtn.onmouseout = function() {
                    this.style.background = '#ef4444';
                };
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²´í¬
        window.addEventListener('DOMContentLoaded', function() {
            checkVehicleExpiration();
            checkUnassignedRequests();  // ë¯¸ë°°ì • ì˜ë¢° ì²´í¬
            checkEquipmentCalibration();  // ì¥ë¹„ êµì • ì„ë°• ì²´í¬
        });
        
        // ë¯¸ë°°ì • ì˜ë¢° ì²´í¬ (ì˜ì—…íŒ€ì¥ë§Œ)
        function checkUnassignedRequests() {
            const currentUser = JSON.parse(localStorage.getItem('dasol_session') || '{}');
            
            // ì˜ì—…íŒ€ì´ ì•„ë‹ˆë©´ ì²´í¬ ì•ˆ í•¨
            if (currentUser.team !== 'ì˜ì—…íŒ€') return;
            
            // íŒ€ì¥ê¸‰ ì´ìƒì¸ì§€ í™•ì¸ (level >= 5 ë˜ëŠ” positionì— "íŒ€ì¥" í¬í•¨)
            const isManager = currentUser.level >= 5 || 
                            (currentUser.position && currentUser.position.includes('íŒ€ì¥'));
            
            if (!isManager) return;
            
            // ë¯¸ë°°ì • ì˜ë¢° ê°œìˆ˜ í™•ì¸
            const requests = JSON.parse(localStorage.getItem('dasol_requests') || '[]');
            const unassignedCount = requests.filter(r => 
                r.isUnassigned && r.status !== 'completed'
            ).length;
            
            if (unassignedCount > 0) {
                const alertBox = document.getElementById('unassignedAlert');
                const countSpan = document.getElementById('unassignedCount');
                
                if (alertBox && countSpan) {
                    alertBox.style.display = 'block';
                    countSpan.textContent = unassignedCount;
                }
            }
        }
        
        // ì¥ë¹„ êµì • ì„ë°• ì²´í¬ (60ì¼ ì´ë‚´)
        function checkEquipmentCalibration() {
            const equipments = JSON.parse(localStorage.getItem('dasol_equipments') || '[]');
            
            const dueEquipments = equipments.filter(eq => {
                if (!eq.nextCalibrationDate) return false;
                
                const today = new Date();
                const calibrationDate = new Date(eq.nextCalibrationDate);
                const diff = calibrationDate - today;
                const daysUntil = Math.ceil(diff / (1000 * 60 * 60 * 24));
                
                return daysUntil >= 0 && daysUntil <= 60;
            });
            
            if (dueEquipments.length > 0) {
                const alertBox = document.getElementById('equipmentCalibrationAlert');
                const countSpan = document.getElementById('equipmentCalibrationCount');
                const listDiv = document.getElementById('equipmentCalibrationList');
                
                if (alertBox && countSpan && listDiv) {
                    alertBox.style.display = 'flex';
                    countSpan.textContent = dueEquipments.length;
                    
                    listDiv.innerHTML = dueEquipments.map(eq => {
                        const today = new Date();
                        const calibrationDate = new Date(eq.nextCalibrationDate);
                        const diff = calibrationDate - today;
                        const daysUntil = Math.ceil(diff / (1000 * 60 * 60 * 24));
                        
                        return `<div style="margin-bottom: 4px;">${eq.equipmentNumber}: ${eq.equipmentName} - ${eq.nextCalibrationDate} (${daysUntil}ì¼ í›„)</div>`;
                    }).join('');
                }
            }
        }
    </script>

    <!-- PWA Service Worker ë“±ë¡ -->
    <script>
        // Service Worker ë“±ë¡
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then((registration) => {
                        console.log('âœ“ Service Worker ë“±ë¡ ì„±ê³µ:', registration.scope);
                        
                        // ì—…ë°ì´íŠ¸ í™•ì¸
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // ìƒˆ ë²„ì „ ì•Œë¦¼
                                    showNotification('ìƒˆ ë²„ì „ ì—…ë°ì´íŠ¸', 'ìƒˆë¡œìš´ ë²„ì „ì´ ìˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨í•˜ì‹œê² ìŠµë‹ˆê¹Œ?');
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.error('âœ— Service Worker ë“±ë¡ ì‹¤íŒ¨:', error);
                    });
            });
        }

        // PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸
        let deferredPrompt;
        const installButton = document.getElementById('installAppButton');
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // ì„¤ì¹˜ ë²„íŠ¼ í‘œì‹œ
            if (installButton) {
                installButton.style.display = 'block';
            }
        });

        // ì„¤ì¹˜ ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬
        if (installButton) {
            installButton.addEventListener('click', async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    
                    if (outcome === 'accepted') {
                        console.log('âœ“ PWA ì„¤ì¹˜ ìŠ¹ì¸');
                    } else {
                        console.log('âœ— PWA ì„¤ì¹˜ ê±°ë¶€');
                    }
                    
                    deferredPrompt = null;
                    installButton.style.display = 'none';
                }
            });
        }

        window.addEventListener('appinstalled', () => {
            console.log('âœ“ PWA ì„¤ì¹˜ ì™„ë£Œ');
            if (installButton) {
                installButton.style.display = 'none';
            }
        });

        // ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ ìƒíƒœ ê°ì§€
        let onlineStatusDiv = null;

        function createOnlineStatusIndicator() {
            onlineStatusDiv = document.createElement('div');
            onlineStatusDiv.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                padding: 12px 20px;
                border-radius: 8px;
                background: white;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 9999;
                display: none;
                align-items: center;
                gap: 8px;
                font-size: 14px;
                font-weight: 500;
                transition: all 0.3s ease;
            `;
            document.body.appendChild(onlineStatusDiv);
        }

        function showOnlineStatus(isOnline) {
            if (!onlineStatusDiv) {
                createOnlineStatusIndicator();
            }

            const statusIcon = isOnline ? 'ğŸŸ¢' : 'ğŸ”´';
            const statusText = isOnline ? 'ì˜¨ë¼ì¸ ëª¨ë“œ' : 'ì˜¤í”„ë¼ì¸ ëª¨ë“œ';
            const statusColor = isOnline ? '#10b981' : '#ef4444';

            onlineStatusDiv.innerHTML = `
                <span style="font-size: 18px;">${statusIcon}</span>
                <span style="color: ${statusColor};">${statusText}</span>
            `;
            onlineStatusDiv.style.display = 'flex';

            setTimeout(() => {
                onlineStatusDiv.style.display = 'none';
            }, 3000);
        }

        window.addEventListener('online', () => {
            console.log('âœ“ ì˜¨ë¼ì¸ ëª¨ë“œ');
            showOnlineStatus(true);
        });

        window.addEventListener('offline', () => {
            console.log('âœ— ì˜¤í”„ë¼ì¸ ëª¨ë“œ');
            showOnlineStatus(false);
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ìƒíƒœ í™•ì¸
        if (!navigator.onLine) {
            showOnlineStatus(false);
        }
    </script>
</body>
</html>
