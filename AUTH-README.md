# 다솔물환경연구소 통합 시스템 - 인증 버전

> **완성일**: 2026년 2월 8일  
> **버전**: 2.0 (인증 시스템 추가)

---

## 🎉 완성된 기능

### ✅ 1. 회원가입 시스템
- **파일**: `signup.html`
- **기능**:
  - 이메일/비밀번호/이름/직급/부서 입력
  - 부서 선택: 영업팀/총무팀/분석팀
  - 자동 사용자 DB 저장
  - 관리자 승인 대기 상태 생성

### ✅ 2. 로그인 시스템
- **파일**: `index.html`
- **기능**:
  - 이메일/비밀번호 인증
  - 자동 로그인 (로그인 상태 유지)
  - 승인 상태 확인
  - 세션 생성 및 관리 (24시간 유효)

### ✅ 3. 사용자 관리 시스템
- **파일**: `pages/admin-users.html`
- **접근 권한**: Kamille님, 관리자만
- **기능**:
  - 신규 가입자 승인/거부
  - 영업팀원 업무지역 설정
  - 분석팀원 분석항목 설정
  - 사용자 비활성화

### ✅ 4. 대시보드 연동
- **파일**: `dashboard-final.html`
- **기능**:
  - 세션 체크 (비로그인 시 로그인 페이지로 이동)
  - 헤더에 사용자 정보 표시
  - 로그아웃 버튼 동작
  - 관리자만 "사용자 관리" 메뉴 표시

---

## 🚀 시작하기

### 1단계: 파일 압축 해제
```
dasol-approval-with-auth.zip 압축 해제
```

### 2단계: 브라우저로 열기
```
index.html 파일을 Chrome 브라우저로 실행
```

### 3단계: Kamille님 계정으로 로그인
```
이메일: kamille@dasol.co.kr
비밀번호: kamille2026

(초기 계정이 자동 생성됩니다)
```

---

## 👥 사용자 관리 흐름

### 📝 신규 직원 가입
1. 직원이 `signup.html`에서 회원가입
2. 이메일/비밀번호/이름/직급/부서 입력
3. 가입 완료 → "승인 대기" 상태

### ✅ Kamille님 승인
1. 로그인 후 대시보드에서 "사용자 관리" 클릭
2. "승인 대기" 탭에서 신규 가입자 확인
3. ✓ 승인 버튼 클릭
4. 자동으로 팀장에게 알림 생성

### 📍 업무지역/분석항목 설정 (부서별)
- **영업팀**: 업무지역 설정 (서울 25개 구, 경기 주요 시)
  - → 향후 의뢰리스트에서 자동 배정
  
- **분석팀**: 분석항목 설정 (pH, 탁도, 대장균 등 30여개)
  - → 향후 접수대장에서 자동 배정

- **총무팀**: 별도 설정 없이 즉시 사용 가능

---

## 🔐 권한 체계

```
Level 0: Kamille (초월적 존재 👑)
├─ 전체 접근 권한
├─ 모든 승인 권한
└─ 사용자 관리

Level 1-10: 일반 직원
├─ Level 1: 대표이사
├─ Level 2: 이사
├─ Level 3: 전무
├─ Level 4: 상무
├─ Level 5: 부장
├─ Level 6: 차장
├─ Level 7: 과장
├─ Level 8: 대리
├─ Level 9: 주임
└─ Level 10: 사원
```

---

## 💾 데이터 저장 방식

모든 데이터는 브라우저의 `localStorage`에 저장됩니다:

```javascript
// 사용자 DB
dasol_users: [
  {
    id: "USER001",
    email: "user@dasol.co.kr",
    name: "홍길동",
    position: "사원",
    team: "영업팀",
    status: "active",
    workRegions: ["서울 강남구", "서울 서초구"],
    analysisItems: []
  }
]

// 현재 세션
dasol_session: {
  id: "USER001",
  name: "홍길동",
  position: "사원",
  team: "영업팀",
  level: 10,
  loginAt: "2026-02-08T10:00:00Z"
}

// 알림
dasol_notifications: [
  {
    type: "region_setting",
    targetUsers: ["KAMILLE", "영업팀장ID"],
    userId: "USER001",
    message: "신규 영업팀원의 업무지역을 설정해주세요"
  }
]
```

---

## 🎯 향후 연동 계획

### 1. 의뢰리스트 자동 배정 (영업팀)
```javascript
// 의뢰 등록 시
의뢰 주소 확인 → 업무지역 매칭 → 담당자 자동 배정
예: "서울 강남구" → 김영업 (업무지역: 강남구)
```

### 2. 접수대장 자동 배정 (분석팀)
```javascript
// 시료 접수 시
검사 항목 확인 → 분석항목 매칭 → 담당자 자동 배정
예: "pH, 탁도" → 박분석 (분석항목: pH, 탁도)
```

---

## 📱 테스트 시나리오

### 시나리오 1: 신규 직원 가입
```
1. signup.html 열기
2. 정보 입력:
   - 이메일: test@dasol.co.kr
   - 비밀번호: test1234
   - 이름: 테스트직원
   - 직급: 사원
   - 부서: 영업팀
3. 회원가입 클릭
4. 성공 메시지 확인
```

### 시나리오 2: Kamille님 승인
```
1. kamille@dasol.co.kr로 로그인
2. "사용자 관리" 메뉴 클릭
3. "승인 대기" 탭에서 테스트직원 확인
4. ✓ 승인 버튼 클릭
```

### 시나리오 3: 업무지역 설정
```
1. "활성 사용자" 탭으로 이동
2. 테스트직원 찾기
3. "📍 업무지역 설정" 버튼 클릭
4. 체크박스로 지역 선택
   - 서울 강남구 ✓
   - 서울 서초구 ✓
5. 저장
```

### 시나리오 4: 직원 로그인
```
1. 로그아웃
2. test@dasol.co.kr / test1234 로그인
3. 대시보드 접근 확인
4. 헤더에 "테스트직원 사원" 표시 확인
```

---

## 🔧 커스터마이징 가이드

### 업무지역 추가/수정
`pages/admin-users.html` 파일에서:
```javascript
const WORK_REGIONS = [
    '서울 강남구', '서울 강동구', ... // 여기에 추가
];
```

### 분석항목 추가/수정
`pages/admin-users.html` 파일에서:
```javascript
const ANALYSIS_ITEMS = [
    'pH', '탁도', '색도', ... // 여기에 추가
];
```

### 세션 유효시간 변경
`index.html` 및 `dashboard-final.html` 파일에서:
```javascript
const hoursDiff = (now - sessionTime) / (1000 * 60 * 60);
if (hoursDiff > 24) { // 24시간 → 원하는 시간으로 변경
```

---

## ⚠️ 주의사항

1. **localStorage 제한**
   - 브라우저마다 5-10MB 제한
   - 중요 데이터는 정기적으로 백업 필요

2. **보안**
   - 비밀번호는 현재 평문 저장 (실무에서는 해싱 필요)
   - HTTPS 사용 권장

3. **브라우저 호환성**
   - Chrome, Edge, Safari, Firefox 최신 버전 권장
   - IE는 미지원

4. **데이터 초기화**
   - 브라우저 데이터 삭제 시 모든 정보 소실
   - 중요 데이터는 Export 기능 필요

---

## 📞 문의 및 지원

시스템 관련 문의:
- 이메일: kamille@dasol.co.kr
- 관리자: Kamille

---

## 📝 변경 이력

### v2.0 (2026-02-08)
- ✅ 회원가입 시스템 추가
- ✅ 로그인 인증 시스템 추가
- ✅ 사용자 관리 페이지 추가
- ✅ 권한 체계 구축
- ✅ 세션 관리 (24시간)
- ✅ 업무지역/분석항목 설정 기능
- ✅ 알림 시스템 기반 구축

### v1.0 (2026-02-07)
- ✅ 전자결재 8종
- ✅ 영업 CRM
- ✅ 3개 게시판
- ✅ 대시보드

---

## 🎊 완료!

**다솔물환경연구소 통합 시스템 - 인증 버전**이 완성되었습니다!

모든 파일이 포함된 `dasol-approval-with-auth.zip`을 사용하시면 됩니다.

---

**Made with ❤️ by Claude & Kamille**
